    Blocking waiting for file lock on artifact directory
    Finished `test` profile [unoptimized + debuginfo] target(s) in 28.67s
     Running unittests src/lib.rs (target/debug/deps/asteroniris-243f17f032d82fe6)

running 256 tests
test channels::chunker::tests::chunk_empty_message ... ok
test channels::chunker::tests::chunk_short_message ... ok
test channels::cli::tests::channel_message_struct ... ok
test channels::cli::tests::channel_message_clone ... ok
test channels::chunker::tests::chunk_long_url_with_hard_split ... ok
test channels::chunker::tests::chunk_unicode_by_character_count ... ok
test channels::chunker::tests::chunk_with_paragraph_sentence_word_fallback ... ok
test channels::cli::tests::cli_channel_name ... ok
test channels::cli::tests::cli_channel_health_check ... ok
test channels::cli::tests::cli_channel_send_empty_message ... ok
test channels::cli::tests::cli_channel_send_does_not_panic ... ok
test channels::discord::tests::bot_user_id_from_empty_token ... ok
test channels::discord::tests::bot_user_id_extraction ... ok
test channels::discord::tests::base64_decode_bot_id ... ok
test channels::email_channel::tests::is_sender_allowed_domain_without_at_prefix ... ok
test channels::email_channel::tests::is_sender_allowed_wildcard_allows_any ... ok
test channels::email_channel::tests::is_sender_allowed_exact_match ... ok
test channels::email_channel::tests::is_sender_allowed_domain_with_at_prefix ... ok
test channels::email_channel::tests::is_sender_allowed_case_insensitive ... ok
test channels::discord::tests::base64_decode_invalid_chars ... ok
test channels::email_channel::tests::strip_html_empty_input ... ok
test channels::email_channel::tests::is_sender_allowed_denies_when_empty ... ok
test channels::email_channel::tests::strip_html_no_tags ... ok
test channels::email_channel::tests::strip_html_preserves_entities ... ok
test channels::discord::tests::base64_decode_empty_string ... ok
test channels::email_channel::tests::strip_html_nested_tags ... ok
test channels::email_channel::tests::strip_html_removes_tags ... ok
test channels::imessage::tests::contact_case_insensitive ... ok
test channels::imessage::tests::creates_with_contacts ... ok
test channels::imessage::tests::creates_with_empty_contacts ... ok
test channels::imessage::tests::contact_with_spaces_exact_match ... ok
test channels::imessage::tests::escape_applescript_backslashes ... ok
test channels::imessage::tests::empty_allowlist_denies_all ... ok
test channels::imessage::tests::escape_applescript_double_quotes ... ok
test channels::imessage::tests::escape_applescript_empty_string ... ok
test channels::imessage::tests::escape_applescript_mixed ... ok
test channels::imessage::tests::escape_applescript_injection_attempt ... ok
test channels::imessage::tests::escape_applescript_no_special_chars ... ok
test channels::imessage::tests::escape_applescript_newlines_escaped ... ok
test channels::imessage::tests::escape_applescript_unicode ... ok
test channels::email_channel::tests::strip_html_collapses_whitespace ... ok
test channels::imessage::tests::fetch_new_messages_empty_database ... ok
test channels::imessage::tests::fetch_new_messages_handles_special_characters ... ok
test channels::imessage::tests::fetch_new_messages_large_rowid_edge_case ... ok
test channels::imessage::tests::fetch_new_messages_handles_empty_text ... ok
test channels::imessage::tests::fetch_new_messages_excludes_null_text ... ok
test channels::imessage::tests::fetch_new_messages_handles_unicode ... ok
test channels::imessage::tests::fetch_new_messages_excludes_sent_messages ... ok
test channels::imessage::tests::fetch_new_messages_nonexistent_database ... ok
test channels::imessage::tests::fetch_new_messages_filters_by_rowid ... ok
test channels::imessage::tests::invalid_target_applescript_injection ... ok
test channels::imessage::tests::fetch_new_messages_ordered_by_rowid_asc ... ok
test channels::imessage::tests::get_max_rowid_nonexistent_database ... ok
test channels::imessage::tests::invalid_target_email_no_domain ... ok
test channels::imessage::tests::invalid_target_email_no_dot_in_domain ... ok
test channels::imessage::tests::get_max_rowid_empty_database ... ok
test channels::imessage::tests::invalid_target_email_no_at ... ok
test channels::imessage::tests::invalid_target_empty ... ok
test channels::imessage::tests::invalid_target_email_no_local ... ok
test channels::imessage::tests::invalid_target_no_plus_prefix ... ok
test channels::imessage::tests::invalid_target_null_byte ... ok
test channels::imessage::tests::invalid_target_too_long_phone ... ok
test channels::imessage::tests::invalid_target_too_short_phone ... ok
test channels::imessage::tests::invalid_target_newline ... ok
test channels::imessage::tests::fetch_new_messages_returns_correct_data ... ok
test channels::imessage::tests::name_returns_imessage ... ok
test channels::imessage::tests::specific_contact_allowed ... ok
test channels::imessage::tests::fetch_new_messages_negative_rowid_edge_case ... ok
test channels::imessage::tests::unknown_contact_denied ... ok
test channels::imessage::tests::target_with_leading_trailing_whitespace_trimmed ... ok
test channels::imessage::tests::valid_email_icloud ... ok
test channels::imessage::tests::valid_email_simple ... ok
test channels::imessage::tests::valid_email_with_dots ... ok
test channels::imessage::tests::valid_email_with_subdomain ... ok
test channels::imessage::tests::valid_phone_number_international ... ok
test channels::imessage::tests::valid_phone_number_simple ... ok
test channels::imessage::tests::valid_phone_number_with_spaces ... ok
test channels::imessage::tests::wildcard_allows_anyone ... ok
test channels::imessage::tests::wildcard_among_others_still_allows_all ... ok
test channels::imessage::tests::valid_email_with_plus ... ok
test channels::imessage::tests::invalid_target_injection_attempt ... ok
test channels::imessage::tests::invalid_target_special_chars ... ok
test channels::irc::tests::allowlist_case_insensitive ... ok
test channels::ingress_policy::tests::external_ingress_policy_sanitizes_marker_collision_for_model_input ... ok
test channels::irc::tests::empty_allowlist_denies_all ... ok
test channels::irc::tests::irc_config_minimal_toml ... ok
test channels::imessage::tests::get_max_rowid_with_messages ... ok
test channels::irc::tests::irc_config_serde_roundtrip ... ok
test channels::irc::tests::irc_config_default_port ... ok
test channels::irc::tests::name_returns_irc ... ok
test channels::irc::tests::new_defaults_username_to_nickname ... ok
test channels::irc::tests::new_uses_explicit_username ... ok
test channels::irc::tests::new_stores_all_fields ... ok
test channels::irc::tests::nick_extraction_nick_only ... ok
test channels::irc::tests::nick_extraction_no_prefix ... ok
test channels::irc::tests::parse_cap_ack ... ok
test channels::irc::tests::parse_empty_line_returns_none ... ok
test channels::irc::tests::nick_extraction_full_prefix ... ok
test channels::irc::tests::parse_command_uppercase ... ok
test channels::imessage::tests::valid_phone_number_with_country_code ... ok
test channels::irc::tests::parse_no_trailing ... ok
test channels::irc::tests::parse_numeric_reply ... ok
test channels::irc::tests::parse_ping ... ok
test channels::irc::tests::parse_privmsg_dm ... ok
test channels::irc::tests::parse_privmsg_with_prefix ... ok
test channels::imessage::tests::fetch_new_messages_respects_limit ... ok
test channels::irc::tests::sasl_plain_empty_password ... ok
test channels::irc::tests::parse_strips_crlf ... ok
test channels::irc::tests::parse_authenticate_plus ... ok
test channels::irc::tests::sasl_plain_encode ... ok
test channels::irc::tests::specific_user_allowed ... ok
test channels::irc::tests::split_crlf_newlines ... ok
test channels::irc::tests::split_empty_message ... ok
test channels::imessage::tests::valid_phone_number_with_dashes ... ok
test channels::irc::tests::split_long_message ... ok
test channels::irc::tests::split_exact_boundary ... ok
test channels::irc::tests::split_multiline_with_long_line ... ok
test channels::irc::tests::split_newlines_into_separate_lines ... ok
test channels::irc::tests::split_only_newlines ... ok
test channels::irc::tests::split_short_message ... ok
test channels::irc::tests::split_unicode_safe ... ok
test channels::irc::tests::wildcard_allows_anyone ... ok
test channels::irc::tests::split_skips_empty_lines ... ok
test channels::irc::tests::split_trailing_newline ... ok
test channels::matrix::tests::event_content_defaults ... ok
test channels::matrix::tests::sync_response_deserializes_empty ... ok
test channels::matrix::tests::sync_response_deserializes_with_events ... ok
test channels::matrix::tests::sync_response_ignores_non_text_events ... ok
test channels::matrix::tests::sync_response_missing_rooms_defaults ... ok
test channels::discord::tests::allowlist_is_exact_match_not_substring ... ok
test channels::discord::tests::specific_allowlist_filters ... ok
test channels::matrix::tests::whoami_response_deserializes ... ok
test channels::discord::tests::allowlist_empty_string_user_id ... ok
test channels::prompt_builder::tests::build_system_prompt_excludes_state_header_when_disabled ... ok
test channels::prompt_builder::tests::build_system_prompt_includes_state_header ... ok
test channels::prompt_builder::tests::build_system_prompt_state_header_keeps_missing_file_marker ... ok
test channels::discord::tests::discord_channel_name ... ok
test channels::prompt_builder::tests::prompt_bootstrap_only_if_exists ... ok
test channels::prompt_builder::tests::prompt_contains_all_sections ... ok
test channels::prompt_builder::tests::build_system_prompt_truncates_large_state ... ok
test channels::prompt_builder::tests::prompt_empty_files_skipped ... ok
test channels::prompt_builder::tests::prompt_injects_safety ... ok
test channels::prompt_builder::tests::prompt_injects_tools ... ok
test channels::prompt_builder::tests::prompt_injects_workspace_files ... ok
test channels::prompt_builder::tests::prompt_missing_file_markers ... ok
test channels::prompt_builder::tests::prompt_no_daily_memory_injection ... ok
test channels::discord::tests::empty_allowlist_denies_everyone ... ok
test channels::prompt_builder::tests::prompt_runtime_metadata ... ok
test channels::matrix::tests::no_trailing_slash_unchanged ... ok
test channels::prompt_builder::tests::prompt_skills_compact_list ... ok
test channels::prompt_builder::tests::prompt_truncation ... ok
test channels::prompt_builder::tests::prompt_workspace_path ... ok
test channels::matrix::tests::multiple_trailing_slashes_strips_one ... ok
test channels::matrix::tests::unknown_user_denied ... ok
test channels::matrix::tests::empty_allowlist_denies_all ... ok
test channels::discord::tests::allowlist_case_sensitive ... ok
test channels::discord::tests::wildcard_allows_everyone ... ok
test channels::matrix::tests::name_returns_matrix ... ok
test channels::matrix::tests::creates_with_correct_fields ... ok
test channels::discord::tests::allowlist_with_wildcard_and_specific ... ok
test channels::matrix::tests::specific_user_allowed ... ok
test channels::matrix::tests::strips_trailing_slash ... ok
test channels::matrix::tests::wildcard_allows_anyone ... ok
test channels::matrix::tests::user_case_insensitive ... ok
test channels::slack::tests::slack_channel_name ... ok
test channels::slack::tests::empty_allowlist_denies_everyone ... ok
test channels::slack::tests::allowlist_wildcard_and_specific ... ok
test channels::slack::tests::allowlist_case_sensitive ... ok
test channels::slack::tests::allowlist_empty_user_id ... ok
test channels::slack::tests::specific_allowlist_filters ... ok
test channels::runtime::tests::supervised_listener_marks_error_and_restarts_on_failures ... ok
test channels::telegram::tests::telegram_api_url ... ok
test channels::slack::tests::slack_channel_with_channel_id ... ok
test channels::telegram::tests::telegram_api_url_send_audio ... ok
test channels::slack::tests::wildcard_allows_everyone ... ok
test channels::telegram::tests::telegram_api_url_send_document ... ok
test channels::telegram::tests::telegram_api_url_send_voice ... ok
test channels::slack::tests::allowlist_exact_match_not_substring ... ok
test channels::telegram::tests::telegram_api_url_send_video ... ok
test channels::telegram::tests::telegram_channel_name ... ok
test channels::telegram::tests::telegram_send_audio_nonexistent_file ... ok
test channels::telegram::tests::telegram_api_url_send_photo ... ok
test channels::telegram::tests::telegram_send_document_nonexistent_file ... ok
test channels::telegram::tests::telegram_send_video_nonexistent_file ... ok
test channels::telegram::tests::telegram_send_photo_nonexistent_file ... ok
test channels::telegram::tests::telegram_user_allowed_by_numeric_id_identity ... ok
test channels::telegram::tests::telegram_user_allowed_wildcard ... ok
test channels::telegram::tests::telegram_user_allowed_specific ... ok
test channels::telegram::tests::telegram_send_voice_nonexistent_file ... ok
test channels::tests::classify_health_ok_false ... ok
test channels::tests::classify_health_ok_true ... ok
test channels::tests::classify_health_timeout ... ok
test channels::telegram::tests::telegram_user_case_sensitive ... ok
test channels::telegram::tests::telegram_user_denied_when_none_of_identities_match ... ok
test channels::telegram::tests::telegram_user_exact_match_not_substring ... ok
test channels::telegram::tests::telegram_user_denied_empty ... ok
test channels::telegram::tests::telegram_user_empty_string_denied ... ok
test channels::telegram::tests::telegram_wildcard_with_specific_users ... ok
test channels::whatsapp::tests::whatsapp_channel_fields_stored_correctly ... ok
test channels::whatsapp::tests::whatsapp_channel_name ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_exact ... ok
test channels::whatsapp::tests::whatsapp_empty_text_skipped ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_case_sensitive ... ok
test channels::whatsapp::tests::whatsapp_number_denied_empty ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_multiple_numbers ... ok
test channels::whatsapp::tests::whatsapp_parse_audio_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_wildcard ... ok
test channels::whatsapp::tests::whatsapp_parse_changes_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_changes_array ... ok
test channels::whatsapp::tests::whatsapp_parse_document_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_messages_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_payload ... ok
test channels::whatsapp::tests::whatsapp_parse_contacts_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_entry_array ... ok
test channels::whatsapp::tests::whatsapp_parse_invalid_timestamp_uses_current ... ok
test channels::whatsapp::tests::whatsapp_parse_entry_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_location_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_changes_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_from_field ... ok
test channels::whatsapp::tests::whatsapp_parse_messages_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_entry_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_messages_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_text_body ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_value ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_timestamp_uses_current ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_messages ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_entries ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_changes ... ok
test channels::whatsapp::tests::whatsapp_parse_mixed_authorized_unauthorized ... ok
test channels::whatsapp::tests::whatsapp_parse_non_text_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_phone_already_has_plus ... ok
test channels::whatsapp::tests::whatsapp_parse_reaction_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_newlines_preserved ... ok
test channels::whatsapp::tests::whatsapp_parse_normalizes_phone_with_plus ... ok
test channels::whatsapp::tests::whatsapp_parse_null_text_body ... ok
test channels::whatsapp::tests::whatsapp_parse_special_characters ... ok
test channels::whatsapp::tests::whatsapp_parse_status_update_ignored ... ok
test channels::whatsapp::tests::whatsapp_parse_valid_text_message ... ok
test channels::whatsapp::tests::whatsapp_parse_video_message_skipped ... ok
test daemon::tests::detects_no_supervised_channels ... ok
test daemon::tests::detects_supervised_channels_present ... ok
test channels::whatsapp::tests::whatsapp_parse_whitespace_only_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_sticker_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_unicode_message ... ok
test channels::whatsapp::tests::whatsapp_parse_unauthorized_number ... ok
test channels::whatsapp::tests::whatsapp_parse_very_long_message ... ok
test channels::whatsapp::tests::whatsapp_verify_token ... ok
test channels::telegram::tests::telegram_send_photo_by_url_builds_correct_json ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_file ... ok
test channels::telegram::tests::telegram_send_document_bytes_builds_correct_form ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_chat_id ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_filename ... ok
test channels::telegram::tests::telegram_send_document_by_url_builds_correct_json ... ok
test channels::telegram::tests::telegram_send_photo_bytes_builds_correct_form ... ok
test channels::telegram::tests::telegram_send_photo_bytes_with_caption ... ok
test channels::telegram::tests::telegram_send_document_bytes_with_caption ... ok

test result: ok. 256 passed; 0 failed; 0 ignored; 0 measured; 825 filtered out; finished in 1.27s

=== cargo check --no-default-features ===
PASS

=== cargo check --features email ===
PASS

=== cargo clippy -- -D warnings ===
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.26s

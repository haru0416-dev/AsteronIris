   Compiling asteroniris v0.1.0 (/home/haru/Project/asteroniris)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 8.54s
     Running tests/agent.rs (target/debug/deps/agent-2966eabba70d4f7f)

running 13 tests
test action_intent::action_intent_requires_policy_verdict ... ok
test external_content::external_ingress_never_replays_blocked_raw_payload_to_model_input ... ok
test scheduler_routes::autonomy_policy_applies_all_routes ... ok
test scheduler_routes::scheduler_routes_user_vs_agent ... ok
test scheduler_routes::autonomy_policy_blocks_bypass ... ok
test action_intent::noop_operator_never_executes_external_action ... ok
test autonomy_cross_layer_flow::public_integration_turn_happy_path ... ok
test autonomy_cross_layer_flow::public_integration_turn_with_policy_happy_path ... ok
test autonomy_cross_layer_flow::public_integration_turn_with_policy_scope_mismatch ... ok
test autonomy_cross_layer_flow::external_content_injection_is_blocked_and_raw_payload_not_replayed_from_memory ... ok
test autonomy_cross_layer_flow::public_integration_turn_propagates_error ... ok
test autonomy_cross_layer_flow::verify_repair_escalates_with_policy_governance_under_retry_pressure ... ok
test autonomy_cross_layer_flow::autonomy_cycle_reflect_queue_verify_and_intent_seam_stays_bounded ... ok

test result: ok. 13 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.03s

   Compiling asteroniris v0.1.0 (/home/haru/Project/asteroniris)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 5.92s
     Running unittests src/lib.rs (target/debug/deps/asteroniris-243f17f032d82fe6)

running 16 tests
test cron::scheduler::tests::scheduler_agent_retry_budget_is_bounded_by_max_attempts ... ok
test cron::scheduler::tests::scheduler_agent_jobs_never_direct_shell ... ok
test cron::scheduler::tests::scheduler_expires_agent_jobs ... ok
test cron::scheduler::tests::scheduler_agent_queue_bounded ... ok
test agent::loop_::tests::autonomy_temperature_clamped ... ok
test agent::loop_::tests::persona_loop_policy_blocks_when_action_limit_is_exhausted ... ok
test agent::loop_::context::tests::build_context_replay_ban_hides_raw_external_payload ... ok
test agent::loop_::tests::persona_loop_call2_failure_preserves_answer ... ok
test agent::loop_::tests::verify_repair_recovers_within_attempt_cap ... ok
test agent::loop_::tests::verify_repair_emits_escalation_event ... ok
test agent::loop_::tests::persona_loop_two_calls_per_turn ... ok
test agent::loop_::tests::post_turn_inference_hook_appends_tagged_events ... ok
test agent::loop_::tests::verify_repair_retries_still_enforce_policy_limits ... ok
test agent::loop_::tests::verify_repair_stops_at_max_attempts ... ok
test agent::loop_::tests::persona_budget_counter_stable ... ok
test agent::loop_::tests::persona_reflect_no_retry ... ok

test result: ok. 16 passed; 0 failed; 0 ignored; 0 measured; 1065 filtered out; finished in 0.09s

   Compiling asteroniris v0.1.0 (/home/haru/Project/asteroniris)
    Finished `test` profile [unoptimized + debuginfo] target(s) in 7.43s
     Running unittests src/lib.rs (target/debug/deps/asteroniris-243f17f032d82fe6)

running 1081 tests
test auth::oauth::tests::extract_prefixed_token_finds_claude_setup_token ... ok
test auth::oauth::tests::normalize_claude_setup_token_rejects_non_setup_token ... ok
test auth::oauth::tests::codex_auth_json_parses_access_and_refresh_tokens ... ok
test auth::tests::broker_migrates_legacy_config_api_key_to_profiles_store ... ok
test auth::tests::load_or_init_migrates_legacy_key_without_duplicate_profiles ... ok
test auth::tests::broker_resolves_embedding_key_from_openai_profile ... ok
test auth::tests::broker_prefers_provider_profile_over_legacy_key ... ok
test auth::tests::upsert_profile_rejects_invalid_id ... ok
test auth::tests::upsert_profile_sets_provider_default_and_normalizes_values ... ok
test channels::chunker::tests::chunk_empty_message ... ok
test auth::tests::recover_oauth_profile_returns_false_for_non_oauth_profile ... ok
test channels::chunker::tests::chunk_short_message ... ok
test channels::chunker::tests::chunk_long_url_with_hard_split ... ok
test auth::tests::save_encrypts_refresh_token_in_store ... ok
test channels::chunker::tests::chunk_unicode_by_character_count ... ok
test auth::tests::recover_oauth_profile_returns_false_for_unknown_oauth_source ... ok
test channels::cli::tests::channel_message_clone ... ok
test channels::chunker::tests::chunk_with_paragraph_sentence_word_fallback ... ok
test channels::cli::tests::channel_message_struct ... ok
test channels::cli::tests::cli_channel_name ... ok
test channels::cli::tests::cli_channel_health_check ... ok
test channels::cli::tests::cli_channel_send_does_not_panic ... ok
test channels::cli::tests::cli_channel_send_empty_message ... ok
test agent::loop_::tests::autonomy_temperature_clamped ... ok
test channels::discord::tests::base64_decode_bot_id ... ok
test channels::discord::tests::base64_decode_empty_string ... ok
test channels::discord::tests::base64_decode_invalid_chars ... ok
test channels::discord::tests::bot_user_id_extraction ... ok
test channels::discord::tests::bot_user_id_from_empty_token ... ok
test agent::loop_::context::tests::build_context_replay_ban_hides_raw_external_payload ... ok
test agent::loop_::tests::persona_loop_policy_blocks_when_action_limit_is_exhausted ... ok
test agent::loop_::tests::persona_loop_call2_failure_preserves_answer ... ok
test agent::loop_::tests::verify_repair_recovers_within_attempt_cap ... ok
test channels::email_channel::tests::is_sender_allowed_case_insensitive ... ok
test channels::email_channel::tests::is_sender_allowed_denies_when_empty ... ok
test channels::email_channel::tests::is_sender_allowed_domain_with_at_prefix ... ok
test channels::email_channel::tests::is_sender_allowed_domain_without_at_prefix ... ok
test channels::email_channel::tests::is_sender_allowed_exact_match ... ok
test channels::email_channel::tests::is_sender_allowed_wildcard_allows_any ... ok
test channels::email_channel::tests::strip_html_collapses_whitespace ... ok
test channels::email_channel::tests::strip_html_empty_input ... ok
test channels::email_channel::tests::strip_html_nested_tags ... ok
test channels::email_channel::tests::strip_html_no_tags ... ok
test channels::email_channel::tests::strip_html_preserves_entities ... ok
test channels::email_channel::tests::strip_html_removes_tags ... ok
test channels::imessage::tests::contact_case_insensitive ... ok
test channels::imessage::tests::contact_with_spaces_exact_match ... ok
test channels::imessage::tests::creates_with_contacts ... ok
test channels::imessage::tests::creates_with_empty_contacts ... ok
test channels::imessage::tests::empty_allowlist_denies_all ... ok
test channels::imessage::tests::escape_applescript_backslashes ... ok
test channels::imessage::tests::escape_applescript_double_quotes ... ok
test channels::imessage::tests::escape_applescript_empty_string ... ok
test channels::imessage::tests::escape_applescript_injection_attempt ... ok
test channels::imessage::tests::escape_applescript_mixed ... ok
test channels::imessage::tests::escape_applescript_newlines_escaped ... ok
test channels::imessage::tests::escape_applescript_no_special_chars ... ok
test agent::loop_::tests::persona_loop_two_calls_per_turn ... ok
test channels::imessage::tests::escape_applescript_unicode ... ok
test agent::loop_::tests::post_turn_inference_hook_appends_tagged_events ... ok
test agent::loop_::tests::verify_repair_emits_escalation_event ... ok
test agent::loop_::tests::verify_repair_retries_still_enforce_policy_limits ... ok
test agent::loop_::tests::verify_repair_stops_at_max_attempts ... ok
test channels::imessage::tests::fetch_new_messages_empty_database ... ok
test channels::imessage::tests::fetch_new_messages_filters_by_rowid ... ok
test channels::imessage::tests::fetch_new_messages_handles_empty_text ... ok
test channels::imessage::tests::fetch_new_messages_excludes_sent_messages ... ok
test channels::imessage::tests::fetch_new_messages_excludes_null_text ... ok
test channels::imessage::tests::fetch_new_messages_nonexistent_database ... ok
test channels::imessage::tests::fetch_new_messages_handles_special_characters ... ok
test channels::imessage::tests::fetch_new_messages_large_rowid_edge_case ... ok
test channels::imessage::tests::fetch_new_messages_handles_unicode ... ok
test channels::imessage::tests::fetch_new_messages_negative_rowid_edge_case ... ok
test channels::imessage::tests::fetch_new_messages_ordered_by_rowid_asc ... ok
test channels::imessage::tests::get_max_rowid_nonexistent_database ... ok
test channels::imessage::tests::invalid_target_applescript_injection ... ok
test channels::imessage::tests::invalid_target_email_no_at ... ok
test channels::imessage::tests::invalid_target_email_no_domain ... ok
test channels::imessage::tests::invalid_target_email_no_dot_in_domain ... ok
test channels::imessage::tests::invalid_target_email_no_local ... ok
test channels::imessage::tests::invalid_target_empty ... ok
test channels::imessage::tests::invalid_target_newline ... ok
test channels::imessage::tests::invalid_target_injection_attempt ... ok
test channels::imessage::tests::invalid_target_no_plus_prefix ... ok
test channels::imessage::tests::invalid_target_null_byte ... ok
test channels::imessage::tests::invalid_target_special_chars ... ok
test channels::imessage::tests::invalid_target_too_long_phone ... ok
test channels::imessage::tests::name_returns_imessage ... ok
test channels::imessage::tests::invalid_target_too_short_phone ... ok
test channels::imessage::tests::specific_contact_allowed ... ok
test channels::imessage::tests::target_with_leading_trailing_whitespace_trimmed ... ok
test channels::imessage::tests::unknown_contact_denied ... ok
test channels::imessage::tests::valid_email_icloud ... ok
test channels::imessage::tests::valid_email_simple ... ok
test channels::imessage::tests::valid_email_with_dots ... ok
test channels::imessage::tests::valid_email_with_plus ... ok
test channels::imessage::tests::valid_email_with_subdomain ... ok
test channels::imessage::tests::valid_phone_number_international ... ok
test channels::imessage::tests::valid_phone_number_simple ... ok
test channels::imessage::tests::get_max_rowid_empty_database ... ok
test channels::imessage::tests::valid_phone_number_with_country_code ... ok
test channels::imessage::tests::valid_phone_number_with_dashes ... ok
test channels::imessage::tests::wildcard_allows_anyone ... ok
test channels::imessage::tests::valid_phone_number_with_spaces ... ok
test channels::imessage::tests::wildcard_among_others_still_allows_all ... ok
test channels::imessage::tests::fetch_new_messages_returns_correct_data ... ok
test channels::irc::tests::empty_allowlist_denies_all ... ok
test channels::irc::tests::allowlist_case_insensitive ... ok
test channels::ingress_policy::tests::external_ingress_policy_sanitizes_marker_collision_for_model_input ... ok
test channels::irc::tests::irc_config_default_port ... ok
test agent::loop_::tests::persona_budget_counter_stable ... ok
test channels::irc::tests::name_returns_irc ... ok
test channels::irc::tests::new_defaults_username_to_nickname ... ok
test channels::irc::tests::irc_config_minimal_toml ... ok
test channels::irc::tests::new_stores_all_fields ... ok
test channels::irc::tests::new_uses_explicit_username ... ok
test channels::irc::tests::irc_config_serde_roundtrip ... ok
test channels::irc::tests::nick_extraction_full_prefix ... ok
test channels::irc::tests::nick_extraction_nick_only ... ok
test channels::irc::tests::nick_extraction_no_prefix ... ok
test channels::irc::tests::parse_authenticate_plus ... ok
test channels::irc::tests::parse_cap_ack ... ok
test channels::irc::tests::parse_command_uppercase ... ok
test channels::irc::tests::parse_empty_line_returns_none ... ok
test channels::irc::tests::parse_no_trailing ... ok
test channels::irc::tests::parse_numeric_reply ... ok
test channels::irc::tests::parse_ping ... ok
test channels::imessage::tests::fetch_new_messages_respects_limit ... ok
test channels::irc::tests::parse_privmsg_dm ... ok
test channels::irc::tests::parse_privmsg_with_prefix ... ok
test channels::irc::tests::parse_strips_crlf ... ok
test channels::imessage::tests::get_max_rowid_with_messages ... ok
test channels::irc::tests::specific_user_allowed ... ok
test channels::irc::tests::split_crlf_newlines ... ok
test channels::irc::tests::split_empty_message ... ok
test channels::irc::tests::sasl_plain_empty_password ... ok
test channels::irc::tests::split_exact_boundary ... ok
test channels::irc::tests::split_long_message ... ok
test channels::irc::tests::split_multiline_with_long_line ... ok
test channels::irc::tests::split_newlines_into_separate_lines ... ok
test channels::irc::tests::split_only_newlines ... ok
test channels::irc::tests::sasl_plain_encode ... ok
test channels::irc::tests::split_skips_empty_lines ... ok
test channels::irc::tests::wildcard_allows_anyone ... ok
test channels::matrix::tests::event_content_defaults ... ok
test channels::irc::tests::split_short_message ... ok
test channels::irc::tests::split_trailing_newline ... ok
test channels::irc::tests::split_unicode_safe ... ok
test channels::discord::tests::allowlist_with_wildcard_and_specific ... ok
test channels::matrix::tests::sync_response_deserializes_empty ... ok
test channels::matrix::tests::sync_response_deserializes_with_events ... ok
test channels::matrix::tests::sync_response_ignores_non_text_events ... ok
test channels::matrix::tests::sync_response_missing_rooms_defaults ... ok
test channels::discord::tests::allowlist_is_exact_match_not_substring ... ok
test channels::discord::tests::allowlist_case_sensitive ... ok
test channels::matrix::tests::whoami_response_deserializes ... ok
test channels::discord::tests::allowlist_empty_string_user_id ... ok
test channels::prompt_builder::tests::build_system_prompt_excludes_state_header_when_disabled ... ok
test channels::prompt_builder::tests::build_system_prompt_includes_state_header ... ok
test channels::prompt_builder::tests::build_system_prompt_state_header_keeps_missing_file_marker ... ok
test channels::prompt_builder::tests::build_system_prompt_truncates_large_state ... ok
test channels::prompt_builder::tests::prompt_bootstrap_only_if_exists ... ok
test channels::prompt_builder::tests::prompt_contains_all_sections ... ok
test channels::prompt_builder::tests::prompt_empty_files_skipped ... ok
test channels::prompt_builder::tests::prompt_injects_safety ... ok
test channels::prompt_builder::tests::prompt_injects_tools ... ok
test channels::prompt_builder::tests::prompt_injects_workspace_files ... ok
test channels::prompt_builder::tests::prompt_missing_file_markers ... ok
test channels::prompt_builder::tests::prompt_no_daily_memory_injection ... ok
test channels::prompt_builder::tests::prompt_runtime_metadata ... ok
test channels::prompt_builder::tests::prompt_skills_compact_list ... ok
test channels::prompt_builder::tests::prompt_truncation ... ok
test channels::prompt_builder::tests::prompt_workspace_path ... ok
test agent::loop_::tests::persona_reflect_no_retry ... ok
test channels::discord::tests::specific_allowlist_filters ... ok
test channels::discord::tests::discord_channel_name ... ok
test channels::matrix::tests::no_trailing_slash_unchanged ... ok
test channels::discord::tests::empty_allowlist_denies_everyone ... ok
test channels::discord::tests::wildcard_allows_everyone ... ok
test channels::matrix::tests::strips_trailing_slash ... ok
test channels::matrix::tests::multiple_trailing_slashes_strips_one ... ok
test channels::matrix::tests::creates_with_correct_fields ... ok
test channels::matrix::tests::name_returns_matrix ... ok
test channels::matrix::tests::empty_allowlist_denies_all ... ok
test channels::matrix::tests::specific_user_allowed ... ok
test channels::matrix::tests::unknown_user_denied ... ok
test channels::matrix::tests::wildcard_allows_anyone ... ok
test channels::matrix::tests::user_case_insensitive ... ok
test channels::slack::tests::allowlist_case_sensitive ... ok
test channels::slack::tests::allowlist_exact_match_not_substring ... ok
test channels::runtime::tests::supervised_listener_marks_error_and_restarts_on_failures ... ok
test channels::slack::tests::allowlist_empty_user_id ... ok
test channels::slack::tests::slack_channel_with_channel_id ... ok
test channels::slack::tests::allowlist_wildcard_and_specific ... ok
test channels::slack::tests::slack_channel_name ... ok
test channels::telegram::tests::telegram_api_url ... ok
test channels::slack::tests::specific_allowlist_filters ... ok
test channels::slack::tests::wildcard_allows_everyone ... ok
test channels::telegram::tests::telegram_api_url_send_document ... ok
test channels::telegram::tests::telegram_api_url_send_photo ... ok
test channels::slack::tests::empty_allowlist_denies_everyone ... ok
test channels::telegram::tests::telegram_api_url_send_video ... ok
test channels::telegram::tests::telegram_api_url_send_audio ... ok
test channels::telegram::tests::telegram_api_url_send_voice ... ok
test channels::telegram::tests::telegram_channel_name ... ok
test channels::telegram::tests::telegram_send_audio_nonexistent_file ... ok
test channels::telegram::tests::telegram_send_document_nonexistent_file ... ok
test channels::telegram::tests::telegram_send_photo_nonexistent_file ... ok
test channels::telegram::tests::telegram_send_voice_nonexistent_file ... ok
test channels::telegram::tests::telegram_user_allowed_specific ... ok
test channels::telegram::tests::telegram_send_video_nonexistent_file ... ok
test channels::telegram::tests::telegram_user_case_sensitive ... ok
test channels::telegram::tests::telegram_user_allowed_by_numeric_id_identity ... ok
test channels::tests::classify_health_ok_false ... ok
test channels::tests::classify_health_ok_true ... ok
test channels::tests::classify_health_timeout ... ok
test channels::telegram::tests::telegram_user_allowed_wildcard ... ok
test channels::telegram::tests::telegram_user_denied_empty ... ok
test channels::telegram::tests::telegram_user_denied_when_none_of_identities_match ... ok
test channels::telegram::tests::telegram_user_empty_string_denied ... ok
test channels::telegram::tests::telegram_user_exact_match_not_substring ... ok
test channels::telegram::tests::telegram_wildcard_with_specific_users ... ok
test channels::whatsapp::tests::whatsapp_channel_fields_stored_correctly ... ok
test channels::whatsapp::tests::whatsapp_channel_name ... ok
test channels::whatsapp::tests::whatsapp_empty_text_skipped ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_case_sensitive ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_exact ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_multiple_numbers ... ok
test channels::whatsapp::tests::whatsapp_parse_audio_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_changes_not_array ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_wildcard ... ok
test channels::whatsapp::tests::whatsapp_parse_contacts_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_number_denied_empty ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_changes_array ... ok
test channels::whatsapp::tests::whatsapp_parse_document_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_entry_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_messages_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_payload ... ok
test channels::whatsapp::tests::whatsapp_parse_entry_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_invalid_timestamp_uses_current ... ok
test channels::whatsapp::tests::whatsapp_parse_messages_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_location_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_changes_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_entry_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_from_field ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_messages_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_text_body ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_timestamp_uses_current ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_value ... ok
test channels::whatsapp::tests::whatsapp_parse_mixed_authorized_unauthorized ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_changes ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_messages ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_entries ... ok
test channels::whatsapp::tests::whatsapp_parse_newlines_preserved ... ok
test channels::whatsapp::tests::whatsapp_parse_non_text_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_normalizes_phone_with_plus ... ok
test channels::whatsapp::tests::whatsapp_parse_null_text_body ... ok
test channels::whatsapp::tests::whatsapp_parse_phone_already_has_plus ... ok
test channels::whatsapp::tests::whatsapp_parse_special_characters ... ok
test channels::whatsapp::tests::whatsapp_parse_sticker_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_status_update_ignored ... ok
test channels::whatsapp::tests::whatsapp_parse_unauthorized_number ... ok
test channels::whatsapp::tests::whatsapp_parse_reaction_message_skipped ... ok
test commands::parser::tests::compact_command ... ok
test commands::parser::tests::empty_input_returns_none ... ok
test commands::parser::tests::help_command ... ok
test commands::parser::tests::help_question_mark ... ok
test commands::parser::tests::leading_whitespace_accepted ... ok
test commands::parser::tests::new_command ... ok
test commands::parser::tests::plain_text_returns_none ... ok
test commands::parser::tests::reset_alias ... ok
test commands::parser::tests::status_case_insensitive ... ok
test commands::parser::tests::status_command ... ok
test commands::parser::tests::status_ignores_extra_args ... ok
test commands::parser::tests::think_with_level ... ok
test commands::parser::tests::think_without_level ... ok
test commands::parser::tests::unknown_command_returns_none ... ok
test commands::parser::tests::usage_command ... ok
test commands::parser::tests::verbose_command ... ok
test commands::parser::tests::whitespace_only_returns_none ... ok
test channels::whatsapp::tests::whatsapp_parse_unicode_message ... ok
test channels::whatsapp::tests::whatsapp_parse_valid_text_message ... ok
test cron::scheduler::tests::run_job_command_blocks_disallowed_command ... ok
test cron::scheduler::tests::run_job_command_blocks_forbidden_path_argument ... ok
test channels::whatsapp::tests::whatsapp_parse_very_long_message ... ok
test cron::scheduler::tests::run_job_command_policy_blocks_when_action_limit_is_exhausted ... ok
test channels::whatsapp::tests::whatsapp_parse_video_message_skipped ... ok
test cron::scheduler::tests::scheduler_agent_jobs_never_direct_shell ... ok
test channels::whatsapp::tests::whatsapp_parse_whitespace_only_message_skipped ... ok
test cron::scheduler::tests::scheduler_agent_retry_budget_is_bounded_by_max_attempts ... ok
test cron::scheduler::tests::scheduler_agent_queue_bounded ... ok
test cron::scheduler::tests::scheduler_expires_agent_jobs ... ok
test cron::scheduler::tests::run_job_command_failure ... ok
test cron::scheduler::tests::run_job_command_success ... ok
test cron::tests::add_job_rejects_invalid_field_count ... ok
test cron::tests::add_job_accepts_five_field_expression ... ok
test cron::tests::due_jobs_filters_by_timestamp ... ok
test daemon::tests::detects_no_supervised_channels ... ok
test cron::tests::add_list_remove_roundtrip ... ok
test daemon::tests::detects_supervised_channels_present ... ok
test channels::whatsapp::tests::whatsapp_verify_token ... ok
test daemon::tests::state_file_path_uses_config_directory ... ok
test cron::tests::reschedule_after_run_persists_last_status_and_last_run ... ok
test doctor::tests::doctor_reports_autonomy_gates ... ok
test doctor::tests::doctor_reports_memory_rollout ... ok
test doctor::tests::doctor_reports_memory_rollout_missing_config ... ok
test gateway::events::tests::client_message_ping_roundtrip ... ok
test gateway::events::tests::client_message_chat_roundtrip ... ok
test gateway::events::tests::server_message_chat_response_serializes ... ok
test gateway::events::tests::server_message_connected_includes_version ... ok
test gateway::events::tests::server_message_error_serializes ... ok
test gateway::events::tests::server_message_to_json_produces_valid_json ... ok
test gateway::openai_compat::auth::tests::empty_keys_allow_access ... ok
test gateway::openai_compat::auth::tests::invalid_key_returns_false ... ok
test gateway::openai_compat::auth::tests::no_authorization_header_returns_false ... ok
test gateway::openai_compat::auth::tests::valid_key_returns_true ... ok
test gateway::openai_compat::auth::tests::wrong_prefix_returns_false ... ok
test gateway::openai_compat::handler::tests::extract_messages_with_multiple_system_messages ... ok
test gateway::openai_compat::handler::tests::extract_messages_with_only_user ... ok
test gateway::openai_compat::handler::tests::extract_messages_with_system_and_user ... ok
test gateway::openai_compat::types::tests::deserializes_chat_completion_request ... ok
test gateway::openai_compat::types::tests::serializes_chat_completion ... ok
test gateway::openai_compat::types::tests::serializes_chat_completion_chunk ... ok
test gateway::tests::app_state_is_clone ... ok
test gateway::tests::autosave_entity_id_is_default ... ok
test gateway::tests::effective_defense_mode_kill_switch_forces_audit ... ok
test gateway::tests::gateway_runtime_policy_context_is_disabled ... ok
test gateway::tests::external_ingress_policy_blocks_high_risk_payload_before_model_call ... ok
test gateway::tests::handle_health_returns_ok_with_unpaired_state ... ok
test gateway::tests::handle_health_reflects_paired_when_tokens_exist ... ok
test gateway::tests::policy_accounting_response_returns_429 ... ok
test gateway::tests::policy_violation_enforce_bearer_returns_401 ... ok
test gateway::tests::policy_violation_enforce_secret_returns_401 ... ok
test gateway::tests::policy_violation_reason_bearer ... ok
test gateway::tests::policy_violation_reason_webhook_secret ... ok
test gateway::tests::security_body_limit_is_64kb ... ok
test gateway::tests::security_timeout_is_30_seconds ... ok
test gateway::tests::webhook_autosave_event_fields ... ok
test gateway::tests::webhook_body_requires_message_field ... ok
test gateway::tests::whatsapp_autosave_event_includes_sender ... ok
test gateway::tests::webhook_policy_blocks_when_action_limit_is_exhausted ... ok
test gateway::tests::whatsapp_message_404_when_not_configured ... ok
test cron::scheduler::tests::scheduler_user_jobs_still_execute_expected_path ... ok
test gateway::tests::whatsapp_message_ack_empty_messages ... ok
test gateway::tests::whatsapp_message_rejects_invalid_json ... ok
test gateway::tests::whatsapp_query_fields_are_optional ... ok
test gateway::tests::whatsapp_signature_case_sensitive_prefix ... ok
test gateway::tests::whatsapp_signature_empty_header ... ok
test gateway::tests::whatsapp_signature_empty_body ... ok
test gateway::tests::whatsapp_signature_invalid_hex ... ok
test gateway::tests::whatsapp_signature_extra_bytes ... ok
test gateway::tests::whatsapp_signature_invalid_wrong_body ... ok
test gateway::tests::whatsapp_signature_invalid_wrong_secret ... ok
test gateway::tests::whatsapp_signature_json_payload ... ok
test gateway::tests::whatsapp_signature_missing_prefix ... ok
test gateway::tests::whatsapp_signature_truncated_hex ... ok
test gateway::tests::whatsapp_signature_unicode_body ... ok
test gateway::tests::whatsapp_signature_valid ... ok
test gateway::tests::whatsapp_message_rejects_invalid_signature ... ok
test daemon::tests::supervisor_marks_error_and_restart_on_failure ... ok
test daemon::tests::supervisor_marks_unexpected_exit_as_error ... ok
test gateway::tests::whatsapp_verify_returns_404_when_not_configured ... ok
test heartbeat::engine::tests::ensure_heartbeat_file_creates_file ... ok
test heartbeat::engine::tests::ensure_heartbeat_file_does_not_overwrite ... ok
test heartbeat::engine::tests::parse_tasks_basic ... ok
test heartbeat::engine::tests::parse_tasks_bullet_with_content_after_spaces ... ok
test heartbeat::engine::tests::parse_tasks_dash_without_space_ignored ... ok
test heartbeat::engine::tests::parse_tasks_empty_content ... ok
test heartbeat::engine::tests::parse_tasks_many_tasks ... ok
test heartbeat::engine::tests::parse_tasks_mixed_markdown ... ok
test heartbeat::engine::tests::parse_tasks_only_comments ... ok
test heartbeat::engine::tests::parse_tasks_single_task ... ok
test heartbeat::engine::tests::parse_tasks_trailing_space_bullet_trimmed_to_dash ... ok
test heartbeat::engine::tests::parse_tasks_unicode ... ok
test heartbeat::engine::tests::parse_tasks_with_leading_whitespace ... ok
test heartbeat::engine::tests::run_returns_immediately_when_disabled ... ok
test heartbeat::engine::tests::tick_counts_tasks_from_file ... ok
test heartbeat::engine::tests::tick_returns_zero_when_no_file ... ok
test integrations::inventory::tests::inventory_json_output_is_stable ... ok
test integrations::inventory::tests::parse_integration_capability_matrix_matches_registry_projection ... ok
test integrations::inventory::tests::parse_registry_coming_soon_count_matches_baseline ... ok
test integrations::inventory::tests::parse_registry_coming_soon_count_matches_symbol_scan ... ok
test integrations::inventory::tests::parse_skillforge_unimplemented_sources_matches_baseline ... ok
test integrations::inventory::tests::parse_skillforge_unimplemented_sources_matches_symbol_scan ... ok
test integrations::inventory::tests::registry_projection_rejects_unbacked_active_or_available ... ok
test integrations::inventory::tests::sort_is_stable_by_category_then_name ... ok
test integrations::inventory::tests::validate_inventory_against_sources_detects_mismatches ... ok
test integrations::inventory::tests::validate_inventory_against_sources_treats_skillforge_order_as_stable ... ok
test integrations::registry::tests::all_categories_represented ... ok
test integrations::registry::tests::category_counts_reasonable ... ok
test integrations::registry::tests::coming_soon_integrations_stay_coming_soon ... ok
test integrations::registry::tests::imessage_active_when_configured ... ok
test integrations::registry::tests::imessage_available_when_not_configured ... ok
test integrations::registry::tests::macos_active_on_macos ... ok
test integrations::registry::tests::matrix_active_when_configured ... ok
test integrations::registry::tests::matrix_available_when_not_configured ... ok
test integrations::registry::tests::no_duplicate_names ... ok
test integrations::registry::tests::no_empty_names_or_descriptions ... ok
test integrations::registry::tests::registry_has_entries ... ok
test integrations::registry::tests::shell_and_filesystem_always_active ... ok
test integrations::registry::tests::status_functions_dont_panic ... ok
test integrations::registry::tests::telegram_active_when_configured ... ok
test integrations::registry::tests::telegram_available_when_not_configured ... ok
test links::detector::tests::angle_brackets ... ok
test links::detector::tests::deduplication ... ok
test links::detector::tests::markdown_link ... ok
test links::detector::tests::multiple_urls ... ok
test links::detector::tests::no_urls ... ok
test links::detector::tests::non_http_schemes_ignored ... ok
test links::detector::tests::parentheses ... ok
test links::detector::tests::preserves_order ... ok
test links::detector::tests::simple_url ... ok
test links::detector::tests::trailing_punctuation ... ok
test links::detector::tests::url_with_query_and_fragment ... ok
test links::extractor::tests::enrich_disabled ... ok
test links::extractor::tests::enrich_no_urls ... ok
test links::extractor::tests::extract_html_article_preferred ... ok
test links::extractor::tests::extract_html_falls_back_to_body ... ok
test links::extractor::tests::extract_html_title_and_body ... ok
test links::extractor::tests::extract_html_truncates ... ok
test links::extractor::tests::truncate_exceeds_limit ... ok
test links::extractor::tests::truncate_unicode ... ok
test links::extractor::tests::truncate_within_limit ... ok
test memory::chunker::tests::chunk_count_reasonable ... ok
test memory::chunker::tests::deeply_nested_headings_ignored ... ok
test memory::chunker::tests::empty_text ... ok
test memory::chunker::tests::fts5_special_chars_in_content ... ok
test memory::chunker::tests::heading_at_end_of_text ... ok
test memory::chunker::tests::heading_sections ... ok
test memory::chunker::tests::headings_only_no_body ... ok
test memory::chunker::tests::indexes_are_sequential ... ok
test memory::chunker::tests::max_tokens_one ... ok
test memory::chunker::tests::max_tokens_zero ... ok
test memory::chunker::tests::multiple_blank_lines_between_paragraphs ... ok
test memory::chunker::tests::no_content_loss ... ok
test memory::chunker::tests::only_newlines_and_whitespace ... ok
test memory::chunker::tests::preserves_heading_in_split_sections ... ok
test memory::chunker::tests::respects_max_tokens ... ok
test memory::chunker::tests::single_heading_no_content ... ok
test memory::chunker::tests::single_short_paragraph ... ok
test memory::chunker::tests::unicode_content ... ok
test memory::chunker::tests::very_long_single_line_no_newlines ... ok
test gateway::tests::whatsapp_verify_rejects_wrong_mode ... ok
test gateway::tests::whatsapp_verify_rejects_missing_challenge ... ok
test memory::embeddings::tests::custom_url_blocks_localhost ... ok
test memory::embeddings::tests::custom_url_blocks_ipv6_loopback_and_link_local ... ok
test memory::embeddings::tests::custom_url_blocks_metadata_host ... ok
test memory::embeddings::tests::custom_url_blocks_private_ipv4_ranges ... ok
test memory::embeddings::tests::custom_url_rejects_invalid_url ... ok
test memory::embeddings::tests::factory_custom_empty_url ... ok
test memory::embeddings::tests::deterministic_embedder_is_stable_and_dimensional ... ok
test memory::embeddings::tests::factory_empty_string_returns_noop ... ok
test memory::embeddings::tests::factory_none ... ok
test gateway::tests::whatsapp_verify_rejects_wrong_token ... ok
test gateway::tests::whatsapp_verify_returns_challenge_on_valid ... ok
test memory::embeddings::tests::factory_unknown_provider_returns_noop ... ok
test memory::embeddings::tests::noop_embed_empty_batch ... ok
test memory::embeddings::tests::noop_embed_multiple_texts ... ok
test memory::embeddings::tests::noop_embed_one_returns_error ... ok
test memory::embeddings::tests::noop_embed_returns_empty ... ok
test memory::embeddings::tests::noop_name ... ok
test memory::embeddings::tests::custom_url_allows_http_only_in_tests ... ok
test memory::embeddings::tests::factory_openai ... ok
test memory::embeddings::tests::factory_custom_url ... ok
test memory::hygiene::tests::archives_old_session_files ... ok
test memory::hygiene::tests::archives_old_daily_memory_files ... ok
test memory::embeddings::tests::factory_openai_no_api_key ... ok
test memory::hygiene::tests::purges_old_memory_archives ... ok
test memory::hygiene::tests::skips_second_run_within_cadence_window ... ok
test memory::hygiene::tests::memory_hygiene_per_layer_retention ... ok
test memory::hygiene::tests::prunes_old_conversation_rows_in_sqlite_backend ... ok
test memory::embeddings::tests::openai_dimensions_custom ... ok
test memory::lancedb::tests::lancedb_name_and_health ... ok
test memory::markdown::tests::markdown_count ... ok
test memory::markdown::tests::markdown_empty_count ... ok
test memory::markdown::tests::markdown_empty_recall ... ok
test memory::markdown::tests::markdown_forget_is_noop ... ok
test memory::markdown::tests::markdown_health_check ... ok
test memory::markdown::tests::markdown_list_by_category ... ok
test memory::markdown::tests::markdown_name ... ok
test memory::markdown::tests::markdown_recall_keyword ... ok
test memory::markdown::tests::markdown_recall_no_match ... ok
test memory::markdown::tests::markdown_store_core ... ok
test memory::markdown::tests::markdown_store_daily ... ok
test memory::tests::factory_markdown ... ok
test memory::tests::factory_none_falls_back_to_markdown ... ok
test memory::tests::factory_sqlite ... ok
test memory::tests::factory_unknown_falls_back_to_markdown ... ok
test memory::embeddings::tests::openai_trailing_slash_stripped ... ok
test memory::vector::tests::bytes_to_vec_non_aligned_truncates ... ok
test memory::vector::tests::bytes_to_vec_three_bytes_returns_empty ... ok
test memory::vector::tests::cosine_both_zero_vectors ... ok
test memory::vector::tests::cosine_empty_returns_zero ... ok
test memory::vector::tests::cosine_high_dimensional ... ok
test memory::vector::tests::cosine_identical_vectors ... ok
test memory::vector::tests::cosine_infinity_returns_zero_or_finite ... ok
test memory::tests::memory_hygiene_failure_nonfatal ... ok
test memory::vector::tests::cosine_nan_returns_zero ... ok
test memory::vector::tests::cosine_mismatched_lengths ... ok
test memory::vector::tests::cosine_negative_values ... ok
test memory::vector::tests::cosine_opposite_vectors_clamped ... ok
test memory::vector::tests::cosine_orthogonal_vectors ... ok
test memory::vector::tests::cosine_similar_vectors ... ok
test memory::vector::tests::cosine_single_element ... ok
test memory::vector::tests::cosine_zero_vector ... ok
test memory::vector::tests::final_score_clamps_and_penalty ... ok
test memory::vector::tests::final_score_matches_weights ... ok
test memory::vector::tests::hybrid_merge_deduplicates ... ok
test memory::vector::tests::hybrid_merge_duplicate_ids_in_same_source ... ok
test memory::vector::tests::hybrid_merge_empty_inputs ... ok
test memory::vector::tests::hybrid_merge_keyword_only ... ok
test memory::vector::tests::hybrid_merge_large_bm25_normalization ... ok
test memory::vector::tests::hybrid_merge_limit_zero ... ok
test memory::vector::tests::hybrid_merge_negative_keyword_scores ... ok
test memory::vector::tests::hybrid_merge_respects_limit ... ok
test memory::vector::tests::hybrid_merge_single_item ... ok
test memory::vector::tests::hybrid_merge_vector_only ... ok
test memory::vector::tests::hybrid_merge_zero_weights ... ok
test memory::vector::tests::vec_bytes_empty ... ok
test memory::vector::tests::vec_bytes_roundtrip ... ok
test memory::vector::tests::vec_bytes_roundtrip_nan_preserves_bits ... ok
test memory::vector::tests::vec_bytes_roundtrip_special_values ... ok
test observability::log::tests::log_observer_all_events_no_panic ... ok
test observability::log::tests::log_observer_all_metrics_no_panic ... ok
test observability::log::tests::log_observer_name ... ok
test observability::multi::tests::multi_empty_no_panic ... ok
test observability::multi::tests::multi_fans_out_events ... ok
test observability::multi::tests::multi_fans_out_flush ... ok
test observability::multi::tests::multi_fans_out_metrics ... ok
test observability::multi::tests::multi_name ... ok
test observability::noop::tests::noop_flush_does_not_panic ... ok
test observability::noop::tests::noop_name ... ok
test observability::noop::tests::noop_record_event_does_not_panic ... ok
test observability::noop::tests::noop_record_metric_does_not_panic ... ok
test observability::otel::tests::otel_observer_name ... ok
test observability::otel::tests::otel_observer_smoke_and_counts ... ok
test observability::prometheus::tests::prometheus_observer_name ... ok
test observability::prometheus::tests::prometheus_observer_smoke_and_counts ... ok
test observability::tests::factory_empty_string_falls_back_to_noop ... ok
test observability::tests::factory_expanded_backends_smoke_paths ... ok
test observability::tests::factory_log_returns_log ... ok
test observability::tests::factory_none_returns_noop ... ok
test observability::tests::factory_noop_returns_noop ... ok
test observability::tests::factory_otel_returns_otel ... ok
test observability::tests::factory_prometheus_returns_prometheus ... ok
test observability::tests::factory_unknown_falls_back_to_noop ... ok
test observability::tests::observability_memory_lifecycle_metrics ... ok
test observability::tests::observability_records_intent_metrics ... ok
test onboard::domain::tests::provider_env_var_known_providers ... ok
test onboard::domain::tests::validate_base_url_preserves_path ... ok
test onboard::domain::tests::validate_base_url_rejects_empty ... ok
test onboard::domain::tests::validate_base_url_trims_trailing_slash ... ok
test onboard::domain::tests::validate_base_url_trims_whitespace ... ok
test onboard::domain::tests::validate_non_empty_rejects_blank ... ok
test onboard::scaffold::tests::scaffold_defaults_empty_fields ... ok
test onboard::scaffold::tests::scaffold_creates_files_and_dirs ... ok
test onboard::scaffold::tests::scaffold_renders_template_variables ... ok
test onboard::scaffold::tests::scaffold_skips_existing_files ... ok
test persona::state_header::tests::state_header_rejects_immutable_field_mutation_boundary ... ok
test persona::state_header::tests::state_header_rejects_invalid ... ok
test persona::state_header::tests::state_header_valid_v1_payload_parse ... ok
test persona::state_persistence::tests::persona_bootstrap_seeds_minimal_state ... ok
test persona::state_persistence::tests::state_header_post_write_syncs_mirror ... ok
test persona::state_persistence::tests::state_header_writeback_atomicity ... ok
test persona::state_persistence::tests::state_header_repairs_divergence ... ok
test planner::dag_contract::tests::dag_contract_rejects_duplicate_edge ... ok
test planner::dag_contract::tests::dag_contract_rejects_unknown_edge_node ... ok
test providers::anthropic::tests::chat_request_serializes_with_system ... ok
test providers::anthropic::tests::chat_request_serializes_without_system ... ok
test providers::anthropic::tests::chat_response_deserializes ... ok
test providers::anthropic::tests::chat_response_empty_content ... ok
test providers::anthropic::tests::chat_response_multiple_blocks ... ok
test providers::anthropic::tests::chat_with_system_fails_without_key ... ok
test providers::anthropic::tests::chat_fails_without_key ... ok
test memory::lancedb::tests::lancedb_forget_and_count ... ok
test providers::anthropic::tests::creates_with_empty_key ... ok
test providers::anthropic::tests::creates_with_custom_base_url ... ok
test providers::anthropic::tests::creates_with_key ... ok
test providers::anthropic::tests::creates_without_key ... ok
test providers::anthropic::tests::creates_with_whitespace_key ... ok
test providers::anthropic::tests::setup_token_detection_works ... ok
test providers::anthropic::tests::temperature_range_serializes ... ok
test providers::anthropic::tests::custom_base_url_trims_trailing_slash ... ok
test cron::scheduler::tests::execute_job_with_retry_exhausts_attempts ... ok
test providers::anthropic::tests::default_base_url_when_none_provided ... ok
test cron::scheduler::tests::execute_job_with_retry_recovers_after_first_failure ... ok
test providers::compatible::tests::chat_completions_url_base_with_v1 ... ok
test providers::compatible::tests::chat_completions_url_custom_full_endpoint ... ok
test memory::lancedb::tests::lancedb_store_get_upsert_and_recall ... ok
test providers::compatible::tests::chat_completions_url_glm ... ok
test providers::compatible::tests::chat_completions_url_opencode ... ok
test providers::compatible::tests::chat_completions_url_standard_openai ... ok
test providers::compatible::tests::chat_completions_url_trailing_slash ... ok
test providers::compatible::tests::chat_completions_url_volcengine_ark ... ok
test providers::compatible::tests::chat_completions_url_without_v1 ... ok
test channels::telegram::tests::telegram_send_document_bytes_builds_correct_form ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_filename ... ok
test providers::compatible::tests::request_serializes_correctly ... ok
test providers::compatible::tests::response_deserializes ... ok
test providers::compatible::tests::response_empty_choices ... ok
test providers::compatible::tests::responses_extracts_any_text_as_fallback ... ok
test providers::compatible::tests::responses_extracts_nested_output_text ... ok
test providers::compatible::tests::responses_extracts_top_level_output_text ... ok
test channels::telegram::tests::telegram_send_photo_bytes_builds_correct_form ... ok
test providers::compatible::tests::chat_completions_url_zai ... ok
test channels::telegram::tests::telegram_send_document_by_url_builds_correct_json ... ok
test providers::compatible::tests::chat_error_messages_redact_sensitive_fields ... ok
test providers::compatible::tests::chat_fails_without_key ... ok
test providers::gemini::tests::error_response_deserialization ... ok
test providers::gemini::tests::gemini_cli_dir_returns_path ... ok
test providers::gemini::tests::model_name_formatting ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_file ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_chat_id ... ok
test providers::gemini::tests::request_serialization ... ok
test providers::gemini::tests::response_deserialization ... ok
test providers::oauth_recovery::tests::cooldown_skips_repeat_recovery_after_failure ... ok
test providers::oauth_recovery::tests::retries_once_after_recovery_and_rebuild ... ok
test channels::telegram::tests::telegram_send_photo_by_url_builds_correct_json ... ok
test providers::compatible::tests::creates_with_key ... ok
test providers::compatible::tests::creates_without_key ... ok
test providers::compatible::tests::strips_trailing_slash ... ok
test providers::ollama::tests::request_serializes_with_system ... ok
test providers::ollama::tests::request_serializes_without_system ... ok
test providers::ollama::tests::response_deserializes ... ok
test providers::ollama::tests::response_with_empty_content ... ok
test providers::ollama::tests::response_with_multiline ... ok
test providers::compatible::tests::responses_url_standard ... ok
test providers::compatible::tests::x_api_key_auth_style ... ok
test providers::compatible::tests::custom_auth_style ... ok
test providers::gemini::tests::provider_creates_with_key ... ok
test providers::compatible::tests::responses_url_custom_full_endpoint ... ok
test providers::openai::tests::request_serializes_with_system_message ... ok
test providers::openai::tests::request_serializes_without_system ... ok
test providers::openai::tests::response_deserializes_empty_choices ... ok
test providers::openai::tests::response_deserializes_multiple_choices ... ok
test providers::openai::tests::response_deserializes_single_choice ... ok
test providers::openai::tests::response_with_long_content ... ok
test providers::openai::tests::response_with_unicode ... ok
test providers::gemini::tests::auth_source_reports_correctly ... ok
test providers::reliable::tests::non_retryable_detects_common_patterns ... ok
test providers::gemini::tests::provider_creates_without_key ... ok
test providers::reliable::tests::returns_aggregated_error_when_all_providers_fail ... ok
test providers::reliable::tests::skips_retries_on_non_retryable_error ... ok
test providers::reliable::tests::succeeds_without_retry ... ok
test providers::ollama::tests::custom_url_no_trailing_slash ... ok
test providers::ollama::tests::custom_url_trailing_slash ... ok
test providers::tests::factory_anthropic_custom_empty_url_errors ... ok
test providers::ollama::tests::empty_url_uses_empty ... ok
test providers::openai::tests::chat_fails_without_key ... ok
test providers::ollama::tests::default_url ... ok
test providers::openai::tests::chat_with_system_fails_without_key ... ok
test providers::openai::tests::creates_with_empty_key ... ok
test providers::reliable::tests::falls_back_after_retries_exhausted ... ok
test providers::reliable::tests::retries_then_recovers ... ok
test providers::tests::factory_custom_empty_url_errors ... ok
test providers::openai::tests::creates_without_key ... ok
test providers::openai::tests::creates_with_key ... ok
test providers::tests::factory_anthropic ... ok
test providers::tests::factory_anthropic_custom_no_key ... ok
test providers::tests::factory_empty_name_errors ... ok
test providers::tests::factory_anthropic_custom_trailing_slash ... ok
test providers::tests::factory_anthropic_custom_url ... ok
test providers::tests::factory_custom_url ... ok
test providers::tests::factory_custom_localhost ... ok
test providers::tests::factory_cohere ... ok
test providers::tests::factory_custom_no_key ... ok
test providers::compatible::tests::all_compatible_providers_fail_without_key ... ok
test providers::tests::factory_deepseek ... ok
test providers::tests::factory_bedrock ... ok
test providers::tests::factory_cloudflare ... ok
test providers::tests::factory_groq ... ok
test providers::tests::factory_minimax ... ok
test providers::tests::factory_copilot ... ok
test channels::telegram::tests::telegram_send_document_bytes_with_caption ... ok
test providers::tests::factory_mistral ... ok
test providers::tests::factory_unknown_provider_errors ... ok
test providers::tests::factory_openai ... ok
test channels::telegram::tests::telegram_send_photo_bytes_with_caption ... ok
test providers::tests::factory_glm ... ok
test providers::tests::factory_fireworks ... ok
test providers::tests::resilient_provider_errors_for_invalid_primary ... ok
test providers::tests::factory_perplexity ... ok
test providers::tests::factory_moonshot ... ok
test providers::tests::sanitize_handles_delimiter_boundaries ... ok
test providers::tests::sanitize_handles_json_wrapped_key ... ok
test providers::tests::sanitize_keeps_bare_prefix ... ok
test providers::tests::sanitize_keeps_non_secret_key_value_pairs ... ok
test providers::tests::sanitize_no_secret_no_change ... ok
test providers::tests::sanitize_preserves_unicode_boundaries ... ok
test providers::tests::sanitize_scrubs_additional_token_prefixes ... ok
test providers::tests::sanitize_scrubs_bearer_authorization_headers ... ok
test providers::tests::sanitize_scrubs_multiple_prefixes ... ok
test providers::tests::sanitize_scrubs_query_and_json_token_fields ... ok
test providers::tests::sanitize_scrubs_sk_prefix ... ok
test providers::tests::sanitize_short_prefix_then_real_key ... ok
test providers::tests::sanitize_sk_proj_comment_then_real_key ... ok
test providers::tests::sanitize_truncates_after_scrub ... ok
test providers::tests::sanitize_truncates_long_error ... ok
test runtime::docker::tests::docker_has_filesystem_access ... ok
test runtime::docker::tests::docker_has_shell_access ... ok
test runtime::docker::tests::docker_memory_budget_unlimited ... ok
test runtime::docker::tests::docker_name ... ok
test runtime::docker::tests::docker_storage_path_is_workspace_scoped ... ok
test runtime::docker::tests::docker_supports_long_running ... ok
test runtime::native::tests::native_has_filesystem_access ... ok
test runtime::native::tests::native_has_shell_access ... ok
test runtime::native::tests::native_memory_budget_unlimited ... ok
test runtime::native::tests::native_name ... ok
test runtime::native::tests::native_storage_path_contains_asteroniris ... ok
test runtime::native::tests::native_supports_long_running ... ok
test runtime::tests::factory_docker_disabled_without_gate ... ok
test runtime::tests::factory_docker_enabled_with_gate ... ok
test runtime::tests::factory_native ... ok
test security::external_content::tests::detect_and_decide_routes_high_risk_to_block ... ok
test security::external_content::tests::detect_and_decide_routes_marker_collision_to_sanitize ... ok
test security::external_content::tests::prepare_external_content_blocks_and_drops_attacker_string_from_model_input ... ok
test security::external_content::tests::sanitize_marker_collision_rewrites_reserved_markers ... ok
test security::external_content::tests::summarize_for_persistence_never_contains_raw_wrapped_payload ... ok
test security::external_content::tests::summarize_for_persistence_source_normalization_is_deterministic ... ok
test security::pairing::tests::brute_force_lockout_after_max_attempts ... ok
test security::pairing::tests::constant_time_eq_different ... ok
test security::pairing::tests::constant_time_eq_same ... ok
test security::pairing::tests::correct_code_resets_failed_attempts ... ok
test security::pairing::tests::generate_code_is_6_digits ... ok
test security::pairing::tests::generate_code_is_not_deterministic ... ok
test security::pairing::tests::generate_token_has_prefix ... ok
test security::pairing::tests::hash_token_differs_for_different_inputs ... ok
test security::pairing::tests::hash_token_is_deterministic ... ok
test security::pairing::tests::hash_token_produces_64_hex_chars ... ok
test security::pairing::tests::is_authenticated_when_pairing_disabled ... ok
test security::pairing::tests::is_authenticated_with_invalid_token ... ok
test security::pairing::tests::is_authenticated_with_prehashed_token ... ok
test security::pairing::tests::is_authenticated_with_valid_token ... ok
test security::pairing::tests::is_token_hash_detects_hash_vs_plaintext ... ok
test security::pairing::tests::localhost_variants_not_public ... ok
test security::pairing::tests::lockout_returns_remaining_seconds ... ok
test providers::tests::factory_synthetic ... ok
test security::pairing::tests::new_guard_generates_code_when_no_tokens ... ok
test security::pairing::tests::new_guard_no_code_when_pairing_disabled ... ok
test security::pairing::tests::new_guard_no_code_when_tokens_exist ... ok
test security::pairing::tests::real_ip_is_public ... ok
test security::pairing::tests::pair_then_authenticate ... ok
test security::pairing::tests::tokens_returns_hashes ... ok
test security::pairing::tests::try_pair_correct_code ... ok
test security::pairing::tests::try_pair_wrong_code ... ok
test security::pairing::tests::try_pair_empty_code ... ok
test security::pairing::tests::zero_zero_is_public ... ok
test security::policy::tests::absolute_paths_allowed_when_not_workspace_only ... ok
test security::policy::tests::absolute_paths_blocked_when_workspace_only ... ok
test security::policy::tests::action_tracker_clone_is_independent ... ok
test security::policy::tests::action_tracker_records_actions ... ok
test security::policy::tests::action_tracker_starts_at_zero ... ok
test security::policy::tests::allowed_commands_basic ... ok
test security::policy::tests::autonomy_default_is_supervised ... ok
test security::policy::tests::autonomy_serde_roundtrip ... ok
test security::policy::tests::blocked_commands_basic ... ok
test security::policy::tests::can_act_full_true ... ok
test security::policy::tests::can_act_readonly_false ... ok
test security::policy::tests::can_act_supervised_true ... ok
test security::policy::tests::cargo_publish_blocked ... ok
test security::policy::tests::cargo_safe_commands_allowed ... ok
test security::policy::tests::checklist_all_system_dirs_blocked ... ok
test security::policy::tests::checklist_default_policy_is_workspace_only ... ok
test security::policy::tests::checklist_default_forbidden_paths_comprehensive ... ok
test providers::tests::factory_opencode ... ok
test security::policy::tests::checklist_null_byte_injection_blocked ... ok
test security::policy::tests::checklist_resolved_path_must_be_in_workspace ... ok
test security::policy::tests::checklist_root_path_blocked ... ok
test security::policy::tests::checklist_sensitive_dotfiles_blocked ... ok
test security::policy::tests::checklist_workspace_only_blocks_all_absolute ... ok
test security::policy::tests::command_env_var_prefix_with_allowed_cmd ... ok
test security::policy::tests::command_injection_backtick_blocked ... ok
test security::policy::tests::command_injection_and_chain_blocked ... ok
test security::policy::tests::command_injection_dollar_brace_blocked ... ok
test security::policy::tests::command_injection_dollar_paren_blocked ... ok
test security::policy::tests::command_injection_or_chain_blocked ... ok
test security::policy::tests::command_injection_redirect_blocked ... ok
test security::policy::tests::command_injection_semicolon_blocked ... ok
test security::policy::tests::command_injection_semicolon_no_space ... ok
test security::policy::tests::command_with_env_var_prefix ... ok
test security::policy::tests::command_with_absolute_path_extracts_basename ... ok
test security::policy::tests::command_with_pipes_validates_all_segments ... ok
test security::policy::tests::consume_action_and_cost_denies_over_action_limit ... ok
test security::policy::tests::consume_action_and_cost_denies_over_daily_cost_limit ... ok
test security::policy::tests::command_newline_injection_blocked ... ok
test security::policy::tests::custom_allowlist ... ok
test security::policy::tests::default_policy_has_sane_values ... ok
test security::policy::tests::empty_allowlist_blocks_everything ... ok
test security::policy::tests::dotfile_in_workspace_allowed ... ok
test security::policy::tests::empty_command_blocked ... ok
test security::policy::tests::empty_path_allowed ... ok
test security::policy::tests::find_exec_allowed_command_passes ... ok
test security::policy::tests::find_exec_disallowed_command_blocked ... ok
test security::policy::tests::find_safe_usage_allowed ... ok
test security::policy::tests::from_config_creates_fresh_tracker ... ok
test security::policy::tests::forbidden_paths_blocked ... ok
test security::policy::tests::from_config_maps_all_fields ... ok
test security::policy::tests::full_autonomy_still_respects_forbidden_paths ... ok
test security::policy::tests::full_autonomy_still_uses_allowlist ... ok
test security::policy::tests::git_clone_and_fetch_allowed ... ok
test security::policy::tests::git_config_injection_via_clone_blocked ... ok
test security::policy::tests::git_config_blocked ... ok
test security::policy::tests::git_config_read_allowed ... ok
test security::policy::tests::git_credential_subcommand_blocked ... ok
test security::policy::tests::git_push_blocked ... ok
test security::policy::tests::git_remote_read_allowed ... ok
test security::policy::tests::git_remote_blocked ... ok
test security::policy::tests::git_safe_read_commands_still_allowed ... ok
test security::policy::tests::git_submodule_blocked ... ok
test security::policy::tests::git_submodule_update_allowed ... ok
test security::policy::tests::git_upload_pack_blocked ... ok
test security::policy::tests::is_rate_limited_reflects_count ... ok
test security::policy::tests::no_false_positive_on_global_flag_in_non_git ... ok
test security::policy::tests::no_false_positive_on_filenames ... ok
test security::policy::tests::npm_publish_blocked ... ok
test security::policy::tests::npm_safe_commands_allowed ... ok
test security::policy::tests::path_home_tilde_ssh ... ok
test security::policy::tests::path_symlink_style_absolute ... ok
test security::policy::tests::path_traversal_blocked ... ok
test providers::tests::factory_venice ... ok
test security::policy::tests::path_traversal_encoded_dots ... ok
test security::policy::tests::path_traversal_double_dot_in_filename ... ok
test security::policy::tests::path_var_run_blocked ... ok
test security::policy::tests::path_with_null_byte_blocked ... ok
test security::policy::tests::rate_limit_exactly_at_boundary ... ok
test security::policy::tests::readonly_blocks_even_safe_commands ... ok
test security::policy::tests::rate_limit_zero_blocks_everything ... ok
test security::policy::tests::rate_limit_high_allows_many ... ok
test security::policy::tests::readonly_blocks_all_commands ... ok
test security::policy::tests::record_action_allows_within_limit ... ok
test security::policy::tests::record_action_blocks_over_limit ... ok
test security::policy::tests::tenant_policy_context_allows_same_tenant_recall_scope ... ok
test security::policy::tests::supervised_allows_listed_commands ... ok
test security::policy::tests::relative_paths_allowed ... ok
test security::policy::tests::tenant_policy_context_denies_cross_tenant_recall_scope ... ok
test security::policy::tests::tenant_policy_context_denies_default_scope_fallback_when_enabled ... ok
test security::secrets::tests::corrupt_hex_returns_error ... ok
test security::secrets::tests::decrypt_and_migrate_fails_on_corrupt_legacy_hex ... ok
test security::secrets::tests::decrypt_and_migrate_handles_empty_secret ... ok
test security::secrets::tests::decrypt_and_migrate_returns_none_for_plaintext ... ok
test security::secrets::tests::decrypt_and_migrate_returns_none_for_enc2 ... ok
test security::secrets::tests::decrypt_and_migrate_handles_unicode ... ok
test security::secrets::tests::decrypt_plaintext_passthrough ... ok
test security::secrets::tests::decrypt_and_migrate_upgrades_legacy_xor ... ok
test security::secrets::tests::decrypt_and_migrate_wrong_key_produces_garbage_or_fails ... ok
test security::secrets::tests::disabled_store_returns_plaintext ... ok
test security::secrets::tests::different_stores_same_dir_interop ... ok
test security::secrets::tests::encrypt_empty_returns_empty ... ok
test security::secrets::tests::encrypt_decrypt_roundtrip ... ok
test security::secrets::tests::generate_random_key_correct_length ... ok
test security::secrets::tests::generate_random_key_not_all_zeros ... ok
test security::secrets::tests::encrypting_same_value_produces_different_ciphertext ... ok
test security::secrets::tests::generate_random_key_has_no_uuid_fixed_bits ... ok
test security::secrets::tests::hex_decode_invalid_chars_fails ... ok
test security::secrets::tests::hex_decode_odd_length_fails ... ok
test security::secrets::tests::hex_roundtrip ... ok
test security::secrets::tests::is_encrypted_detects_prefix ... ok
test security::secrets::tests::is_secure_encrypted_detects_enc2_only ... ok
test security::secrets::tests::key_file_created_on_first_encrypt ... ok
test security::secrets::tests::key_file_has_restricted_permissions ... ok
test security::secrets::tests::legacy_xor_decrypt_still_works ... ok
test security::secrets::tests::migrated_value_is_tamper_resistant ... ok
test security::secrets::tests::migration_produces_different_ciphertext_each_time ... ok
test security::secrets::tests::needs_migration_detects_legacy_prefix ... ok
test security::secrets::tests::truncated_ciphertext_returns_error ... ok
test security::secrets::tests::tampered_ciphertext_detected ... ok
test security::secrets::tests::two_random_keys_differ ... ok
test security::secrets::tests::unicode_secret_roundtrip ... ok
test security::secrets::tests::xor_cipher_empty_key ... ok
test security::secrets::tests::xor_cipher_roundtrip ... ok
test security::writeback_guard::tests::guard_accepts_bounded_self_tasks_and_style_profile ... ok
test security::secrets::tests::wrong_key_detected ... ok
test security::writeback_guard::tests::guard_accepts_list_item_at_schema_boundary ... ok
test security::writeback_guard::tests::guard_rejects_immutable_field_mutation_attempt ... ok
test security::writeback_guard::tests::guard_accepts_valid_reflection ... ok
test security::writeback_guard::tests::guard_rejects_list_item_over_schema_boundary ... ok
test security::writeback_guard::tests::guard_rejects_malformed_payload ... ok
test security::writeback_guard::tests::guard_rejects_memory_poisoning ... ok
test security::writeback_guard::tests::guard_rejects_open_loops_over_limit ... ok
test security::writeback_guard::tests::guard_rejects_self_task_expiry_over_allowed_horizon ... ok
test security::writeback_guard::tests::guard_rejects_self_task_with_poison_pattern ... ok
test security::writeback_guard::tests::guard_rejects_self_tasks_over_limit ... ok
test security::writeback_guard::tests::guard_rejects_unknown_state_header_fields ... ok
test security::writeback_guard::tests::guard_rejects_style_profile_out_of_safe_range ... ok
test service::tests::linux_service_file_has_expected_suffix ... ok
test security::secrets::tests::decrypt_and_migrate_handles_long_secret ... ok
test security::secrets::tests::long_secret_roundtrip ... ok
test service::tests::xml_escape_escapes_reserved_chars ... ok
test service::tests::run_capture_reads_stdout ... ok
test sessions::compaction::tests::compact_above_threshold_summarizes_and_returns_true ... ok
test service::tests::run_capture_falls_back_to_stderr ... ok
test sessions::manager::tests::get_history_returns_messages ... ok
test sessions::compaction::tests::compact_below_threshold_returns_false ... ok
test service::tests::run_checked_errors_on_non_zero_status ... ok
test sessions::manager::tests::record_turn_appends_user_and_assistant_messages ... ok
test providers::tests::factory_openrouter ... ok
test sessions::manager::tests::resolve_session_creates_then_reuses_session ... ok
test sessions::store::tests::create_session_returns_valid_session ... ok
test sessions::store::tests::append_message_creates_message_with_expected_fields ... ok
test sessions::store::tests::count_messages_returns_correct_count ... ok
test sessions::manager::tests::reset_session_archives_existing_and_creates_new ... ok
test sessions::store::tests::delete_session_returns_true_then_false ... ok
test sessions::store::tests::delete_messages_before_deletes_expected_messages ... ok
test sessions::store::tests::get_or_create_session_returns_existing_active_session ... ok
test sessions::store::tests::get_messages_returns_chronological_order ... ok
test skills::symlink_tests::tests::test_skills_symlink_permissions_and_safety ... ok
test skills::symlink_tests::tests::test_skills_symlink_unix_edge_cases ... ok
test skills::tests::tests::init_skills_creates_readme ... ok
test skills::tests::tests::init_skills_idempotent ... ok
test sessions::store::tests::get_messages_with_limit_respects_limit ... ok
test skills::tests::tests::load_empty_skills_dir ... ok
test skills::tests::tests::load_ignores_dir_without_manifest ... ok
test sessions::store::tests::get_session_finds_existing_and_none_for_missing ... ok
test skills::tests::tests::load_multiple_skills ... ok
test skills::tests::tests::load_nonexistent_dir ... ok
test sessions::store::tests::list_sessions_returns_all_and_filters_by_channel ... ok
test skills::tests::tests::load_skill_from_md ... ok
test skills::tests::tests::skills_dir_path ... ok
test skills::tests::tests::md_skill_heading_only ... ok
test skills::tests::tests::skills_to_prompt_empty ... ok
test skills::tests::tests::load_ignores_files_in_skills_dir ... ok
test skills::tests::tests::load_skill_from_toml ... ok
test skills::tests::tests::skills_to_prompt_includes_tools ... ok
test skills::tests::tests::skills_to_prompt_with_skills ... ok
test tools::browser::tests::browser_tool_empty_allowlist_blocks ... ok
test skills::tests::tests::toml_skill_invalid_syntax_skipped ... ok
test skills::tests::tests::toml_prefers_over_md ... ok
test skills::tests::tests::toml_skill_minimal ... ok
test skills::tests::tests::toml_skill_with_multiple_tools ... ok
test tools::browser::tests::browser_tool_name ... ok
test tools::browser::tests::extract_host_handles_ipv6 ... ok
test tools::browser::tests::browser_tool_validates_url ... ok
test tools::browser::tests::extract_host_works ... ok
test tools::browser::tests::host_matches_allowlist_exact ... ok
test tools::browser::tests::host_matches_allowlist_star ... ok
test tools::browser::tests::host_matches_allowlist_wildcard ... ok
test tools::browser::tests::is_private_host_catches_ipv6 ... ok
test tools::browser::tests::is_private_host_catches_ipv6_private_ranges ... ok
test tools::browser::tests::is_private_host_catches_mapped_ipv4 ... ok
test tools::browser::tests::is_private_host_detects_local ... ok
test tools::browser::tests::normalize_domains_works ... ok
test tools::browser::tests::validate_url_blocks_ipv6_ssrf ... ok
test tools::browser_open::tests::normalize_allowed_domains_deduplicates ... ok
test tools::browser_open::tests::parse_ipv4_valid ... ok
test tools::browser_open::tests::normalize_domain_strips_scheme_path_and_case ... ok
test tools::browser_open::tests::execute_blocks_when_rate_limited ... ok
test tools::browser_open::tests::execute_blocks_readonly_mode ... ok
test tools::browser_open::tests::parse_ipv4_invalid ... ok
test tools::browser_open::tests::validate_accepts_exact_domain ... ok
test tools::browser_open::tests::validate_accepts_subdomain ... ok
test tools::browser_open::tests::validate_rejects_allowlist_miss ... ok
test tools::browser_open::tests::validate_rejects_http ... ok
test tools::browser_open::tests::validate_rejects_localhost ... ok
test tools::browser_open::tests::validate_rejects_private_ipv4 ... ok
test tools::browser_open::tests::validate_rejects_userinfo ... ok
test tools::browser_open::tests::validate_rejects_whitespace ... ok
test tools::browser_open::tests::validate_requires_allowlist ... ok
test tools::composio::tests::composio_action_deserializes ... ok
test tools::composio::tests::composio_actions_response_deserializes ... ok
test tools::composio::tests::composio_actions_response_empty ... ok
test tools::composio::tests::composio_actions_response_missing_items_defaults ... ok
test providers::tests::factory_together ... ok
test providers::tests::factory_qianfan ... ok
test providers::tests::factory_ollama ... ok
test providers::tests::factory_vercel ... ok
test providers::tests::factory_zai ... ok
test tools::file_read::tests::file_read_blocks_absolute_path ... ok
test tools::file_read::tests::file_read_blocks_path_traversal ... ok
test tools::file_read::tests::file_read_blocks_symlink_escape ... ok
test tools::file_read::tests::file_read_existing_file ... ok
test tools::file_read::tests::file_read_missing_path_param ... ok
test tools::file_read::tests::file_read_empty_file ... ok
test tools::file_read::tests::file_read_name ... ok
test tools::file_read::tests::file_read_nonexistent_file ... ok
test tools::file_read::tests::file_read_nested_path ... ok
test tools::file_read::tests::file_read_schema_has_path ... ok
test tools::file_write::tests::file_write_blocks_absolute_path ... ok
test tools::file_write::tests::file_write_blocks_path_traversal ... ok
test tools::file_write::tests::file_write_blocks_symlink_escape ... ok
test providers::tests::factory_xai ... ok
test tools::file_write::tests::file_write_creates_parent_dirs ... ok
test tools::file_write::tests::file_write_creates_file ... ok
test providers::tests::resilient_provider_ignores_duplicate_and_invalid_fallbacks ... ok
test tools::file_write::tests::file_write_missing_content_param ... ok
test tools::file_write::tests::file_write_missing_path_param ... ok
test tools::file_write::tests::file_write_empty_content ... ok
test tools::file_write::tests::file_write_schema_has_path_and_content ... ok
test tools::file_write::tests::file_write_overwrites_existing ... ok
test tools::file_write::tests::file_write_name ... ok
test providers::tests::factory_gemini ... ok
test tools::composio::tests::composio_tool_schema_has_required_fields ... ok
test tools::file_read::tests::file_read_rejects_oversized_file ... ok
test tools::memory_forget::tests::forget_missing_key ... ok
test tools::memory_forget::tests::forget_nonexistent ... ok
test tools::memory_forget::tests::name_and_schema ... ok
test tools::composio::tests::composio_tool_has_description ... ok
test tools::memory_forget::tests::forget_existing ... ok
test tools::composio::tests::connect_without_app_returns_error ... ok
test tools::composio::tests::composio_tool_has_correct_name ... ok
test tools::composio::tests::composio_tool_spec_roundtrip ... ok
test tools::memory_recall::tests::name_and_schema ... ok
test tools::memory_recall::tests::recall_rejects_default_scope_when_tenant_mode_enabled ... ok
test tools::shell::tests::shell_blocks_disallowed_command ... ok
test tools::memory_recall::tests::recall_missing_query ... ok
test tools::shell::tests::shell_blocks_readonly ... ok
test tools::memory_store::tests::name_and_schema ... ok
test tools::memory_store::tests::store_missing_content ... ok
test tools::shell::tests::shell_missing_command_param ... ok
test tools::shell::tests::shell_policy_blocks_when_action_limit_is_exhausted ... ok
test tools::shell::tests::shell_captures_exit_code ... ok
test tools::shell::tests::shell_tool_description ... ok
test tools::shell::tests::shell_tool_name ... ok
test tools::shell::tests::shell_does_not_leak_api_key ... ok
test tools::shell::tests::shell_tool_schema_has_command ... ok
test tools::shell::tests::shell_wrong_type_param ... ok
test tools::memory_recall::tests::recall_empty ... ok
test tools::tests::all_tools_excludes_browser_when_disabled ... ok
test tools::tests::default_tools_all_have_descriptions ... ok
test tools::tests::all_tools_includes_browser_when_enabled ... ok
test tools::tests::default_tools_all_have_schemas ... ok
test tools::tests::default_tools_has_three ... ok
test tools::tests::default_tools_names ... ok
test tools::shell::tests::shell_executes_allowed_command ... ok
test tools::tests::tool_spec_generation ... ok
test tools::tests::tool_result_serde ... ok
test tools::tests::tool_result_with_error_serde ... ok
test tools::tests::tool_spec_serde ... ok
test tunnel::tests::cloudflare_tunnel_name ... ok
test tunnel::tests::custom_tunnel_name ... ok
test tunnel::tests::factory_cloudflare_missing_config_errors ... ok
test tunnel::tests::factory_cloudflare_with_config_ok ... ok
test tunnel::tests::factory_custom_with_config_ok ... ok
test tunnel::tests::factory_empty_string_returns_none ... ok
test tunnel::tests::factory_ngrok_with_config_ok ... ok
test tunnel::tests::factory_custom_missing_config_errors ... ok
test tunnel::tests::factory_none_returns_none ... ok
test tunnel::tests::factory_tailscale_defaults_ok ... ok
test tunnel::tests::factory_ngrok_missing_config_errors ... ok
test tunnel::tests::factory_unknown_provider_errors ... ok
test tunnel::tests::ngrok_tunnel_name ... ok
test tunnel::tests::ngrok_with_domain ... ok
test tunnel::tests::none_tunnel_name ... ok
test tunnel::tests::none_tunnel_public_url_is_none ... ok
test tunnel::tests::none_tunnel_health_always_true ... ok
test tunnel::tests::tailscale_funnel_mode ... ok
test tunnel::tests::tailscale_tunnel_name ... ok
test tunnel::tests::none_tunnel_start_returns_local ... ok
test usage::tracker::tests::pricing_estimation_returns_expected_micros ... ok
test tools::memory_store::tests::store_core ... ok
test tools::shell::tests::shell_preserves_path_and_home ... ok
test usage::types::tests::default_pricing_returns_non_empty_list ... ok
test usage::tracker::tests::create_tracker_with_temp_file_succeeds ... ok
test usage::types::tests::estimate_cost_micros_calculates_correctly ... ok
test usage::types::tests::lookup_pricing_finds_matching_model ... ok
test usage::tracker::tests::summarize_empty_database_returns_zeros ... ok
test usage::types::tests::lookup_pricing_returns_none_for_unknown_model ... ok
test util::tests::test_truncate_accented_characters ... ok
test usage::tracker::tests::multiple_records_aggregate_correctly ... ok
test util::tests::test_truncate_ascii_no_truncation ... ok
test util::tests::test_truncate_cjk_characters ... ok
test util::tests::test_truncate_emoji_multiple ... ok
test util::tests::test_truncate_emoji_single ... ok
test util::tests::test_truncate_ascii_with_truncation ... ok
test util::tests::test_truncate_at_exact_boundary ... ok
test util::tests::test_truncate_empty_string ... ok
test usage::tracker::tests::record_usage_entry_and_summarize ... ok
test util::tests::test_truncate_long_string ... ok
test util::tests::test_truncate_mixed_ascii_emoji ... ok
test usage::tracker::tests::summarize_with_since_filter_respects_date_filter ... ok
test util::tests::test_truncate_unicode_edge_case ... ok
test util::tests::test_truncate_zero_max_chars ... ok
test tools::memory_store::tests::store_missing_key ... ok
test tools::memory_recall::tests::recall_finds_match ... ok
test tools::memory_store::tests::store_with_category ... ok
test providers::tests::resilient_provider_with_resolver_uses_per_provider_credentials ... ok
test tools::memory_recall::tests::recall_respects_limit ... ok
test tools::composio::tests::execute_unknown_action_returns_error ... ok
test tools::composio::tests::execute_missing_action_returns_error ... ok
test tools::composio::tests::execute_without_action_name_returns_error ... ok
test memory::lancedb::tests::lancedb_recall_respects_limit ... ok
test providers::tests::factory_all_providers_create_successfully ... ok

test result: ok. 1081 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 2.17s

     Running unittests src/main.rs (target/debug/deps/asteroniris-e15dae8c15ffdeb7)

running 1042 tests
test auth::oauth::tests::extract_prefixed_token_finds_claude_setup_token ... ok
test auth::oauth::tests::normalize_claude_setup_token_rejects_non_setup_token ... ok
test app::status::tests::status_reports_memory_rollout_support ... ok
test auth::oauth::tests::codex_auth_json_parses_access_and_refresh_tokens ... ok
test auth::tests::broker_migrates_legacy_config_api_key_to_profiles_store ... ok
test auth::tests::broker_resolves_embedding_key_from_openai_profile ... ok
test auth::tests::broker_prefers_provider_profile_over_legacy_key ... ok
test auth::tests::load_or_init_migrates_legacy_key_without_duplicate_profiles ... ok
test auth::tests::upsert_profile_rejects_invalid_id ... ok
test auth::tests::upsert_profile_sets_provider_default_and_normalizes_values ... ok
test channels::chunker::tests::chunk_empty_message ... ok
test auth::tests::recover_oauth_profile_returns_false_for_non_oauth_profile ... ok
test auth::tests::save_encrypts_refresh_token_in_store ... ok
test channels::chunker::tests::chunk_long_url_with_hard_split ... ok
test channels::chunker::tests::chunk_short_message ... ok
test channels::chunker::tests::chunk_unicode_by_character_count ... ok
test auth::tests::recover_oauth_profile_returns_false_for_unknown_oauth_source ... ok
test channels::chunker::tests::chunk_with_paragraph_sentence_word_fallback ... ok
test channels::cli::tests::channel_message_clone ... ok
test channels::cli::tests::channel_message_struct ... ok
test channels::cli::tests::cli_channel_name ... ok
test channels::cli::tests::cli_channel_health_check ... ok
test channels::cli::tests::cli_channel_send_does_not_panic ... ok
test channels::cli::tests::cli_channel_send_empty_message ... ok
test agent::loop_::tests::autonomy_temperature_clamped ... ok
test channels::discord::tests::base64_decode_bot_id ... ok
test channels::discord::tests::base64_decode_empty_string ... ok
test channels::discord::tests::base64_decode_invalid_chars ... ok
test channels::discord::tests::bot_user_id_extraction ... ok
test channels::discord::tests::bot_user_id_from_empty_token ... ok
test agent::loop_::tests::persona_loop_policy_blocks_when_action_limit_is_exhausted ... ok
test agent::loop_::context::tests::build_context_replay_ban_hides_raw_external_payload ... ok
test agent::loop_::tests::persona_loop_call2_failure_preserves_answer ... ok
test agent::loop_::tests::verify_repair_recovers_within_attempt_cap ... ok
test channels::email_channel::tests::is_sender_allowed_case_insensitive ... ok
test channels::email_channel::tests::is_sender_allowed_denies_when_empty ... ok
test channels::email_channel::tests::is_sender_allowed_domain_with_at_prefix ... ok
test channels::email_channel::tests::is_sender_allowed_domain_without_at_prefix ... ok
test channels::email_channel::tests::is_sender_allowed_exact_match ... ok
test channels::email_channel::tests::is_sender_allowed_wildcard_allows_any ... ok
test channels::email_channel::tests::strip_html_collapses_whitespace ... ok
test agent::loop_::tests::verify_repair_emits_escalation_event ... ok
test channels::email_channel::tests::strip_html_empty_input ... ok
test channels::email_channel::tests::strip_html_nested_tags ... ok
test channels::email_channel::tests::strip_html_no_tags ... ok
test channels::email_channel::tests::strip_html_removes_tags ... ok
test channels::imessage::tests::contact_case_insensitive ... ok
test channels::imessage::tests::contact_with_spaces_exact_match ... ok
test channels::imessage::tests::creates_with_contacts ... ok
test channels::imessage::tests::creates_with_empty_contacts ... ok
test agent::loop_::tests::persona_loop_two_calls_per_turn ... ok
test channels::imessage::tests::empty_allowlist_denies_all ... ok
test channels::email_channel::tests::strip_html_preserves_entities ... ok
test channels::imessage::tests::escape_applescript_double_quotes ... ok
test channels::imessage::tests::escape_applescript_backslashes ... ok
test channels::imessage::tests::escape_applescript_injection_attempt ... ok
test channels::imessage::tests::escape_applescript_mixed ... ok
test channels::imessage::tests::escape_applescript_empty_string ... ok
test channels::imessage::tests::escape_applescript_newlines_escaped ... ok
test channels::imessage::tests::escape_applescript_no_special_chars ... ok
test channels::imessage::tests::escape_applescript_unicode ... ok
test agent::loop_::tests::post_turn_inference_hook_appends_tagged_events ... ok
test agent::loop_::tests::verify_repair_stops_at_max_attempts ... ok
test channels::imessage::tests::fetch_new_messages_empty_database ... ok
test agent::loop_::tests::verify_repair_retries_still_enforce_policy_limits ... ok
test channels::imessage::tests::fetch_new_messages_excludes_sent_messages ... ok
test channels::imessage::tests::fetch_new_messages_excludes_null_text ... ok
test channels::imessage::tests::fetch_new_messages_filters_by_rowid ... ok
test channels::imessage::tests::fetch_new_messages_nonexistent_database ... ok
test channels::imessage::tests::fetch_new_messages_handles_special_characters ... ok
test channels::imessage::tests::fetch_new_messages_handles_unicode ... ok
test channels::imessage::tests::fetch_new_messages_large_rowid_edge_case ... ok
test channels::imessage::tests::fetch_new_messages_handles_empty_text ... ok
test channels::imessage::tests::fetch_new_messages_negative_rowid_edge_case ... ok
test channels::imessage::tests::get_max_rowid_nonexistent_database ... ok
test channels::imessage::tests::fetch_new_messages_ordered_by_rowid_asc ... ok
test channels::imessage::tests::invalid_target_applescript_injection ... ok
test channels::imessage::tests::invalid_target_email_no_at ... ok
test channels::imessage::tests::invalid_target_email_no_domain ... ok
test channels::imessage::tests::invalid_target_email_no_dot_in_domain ... ok
test channels::imessage::tests::invalid_target_email_no_local ... ok
test channels::imessage::tests::invalid_target_empty ... ok
test channels::imessage::tests::invalid_target_injection_attempt ... ok
test channels::imessage::tests::invalid_target_no_plus_prefix ... ok
test channels::imessage::tests::invalid_target_newline ... ok
test channels::imessage::tests::invalid_target_null_byte ... ok
test channels::imessage::tests::invalid_target_special_chars ... ok
test channels::imessage::tests::invalid_target_too_long_phone ... ok
test channels::imessage::tests::invalid_target_too_short_phone ... ok
test channels::imessage::tests::specific_contact_allowed ... ok
test channels::imessage::tests::name_returns_imessage ... ok
test channels::imessage::tests::fetch_new_messages_returns_correct_data ... ok
test channels::imessage::tests::target_with_leading_trailing_whitespace_trimmed ... ok
test channels::imessage::tests::unknown_contact_denied ... ok
test channels::imessage::tests::valid_email_icloud ... ok
test channels::imessage::tests::valid_email_simple ... ok
test channels::imessage::tests::valid_email_with_plus ... ok
test channels::imessage::tests::valid_email_with_subdomain ... ok
test channels::imessage::tests::valid_email_with_dots ... ok
test channels::imessage::tests::valid_phone_number_international ... ok
test channels::imessage::tests::valid_phone_number_with_country_code ... ok
test channels::imessage::tests::valid_phone_number_simple ... ok
test channels::imessage::tests::valid_phone_number_with_dashes ... ok
test channels::imessage::tests::wildcard_allows_anyone ... ok
test channels::imessage::tests::wildcard_among_others_still_allows_all ... ok
test channels::irc::tests::allowlist_case_insensitive ... ok
test channels::irc::tests::empty_allowlist_denies_all ... ok
test channels::imessage::tests::get_max_rowid_empty_database ... ok
test channels::ingress_policy::tests::external_ingress_policy_sanitizes_marker_collision_for_model_input ... ok
test channels::irc::tests::irc_config_default_port ... ok
test channels::irc::tests::name_returns_irc ... ok
test channels::irc::tests::irc_config_minimal_toml ... ok
test channels::irc::tests::new_defaults_username_to_nickname ... ok
test channels::irc::tests::new_stores_all_fields ... ok
test channels::irc::tests::irc_config_serde_roundtrip ... ok
test agent::loop_::tests::persona_budget_counter_stable ... ok
test channels::imessage::tests::valid_phone_number_with_spaces ... ok
test channels::irc::tests::new_uses_explicit_username ... ok
test channels::irc::tests::nick_extraction_full_prefix ... ok
test channels::irc::tests::nick_extraction_nick_only ... ok
test channels::irc::tests::nick_extraction_no_prefix ... ok
test channels::irc::tests::parse_authenticate_plus ... ok
test channels::irc::tests::parse_cap_ack ... ok
test channels::irc::tests::parse_command_uppercase ... ok
test channels::irc::tests::parse_empty_line_returns_none ... ok
test channels::imessage::tests::fetch_new_messages_respects_limit ... ok
test channels::irc::tests::parse_no_trailing ... ok
test channels::irc::tests::parse_numeric_reply ... ok
test channels::imessage::tests::get_max_rowid_with_messages ... ok
test channels::irc::tests::parse_ping ... ok
test channels::irc::tests::parse_privmsg_dm ... ok
test channels::irc::tests::parse_privmsg_with_prefix ... ok
test channels::irc::tests::parse_strips_crlf ... ok
test channels::irc::tests::sasl_plain_empty_password ... ok
test channels::irc::tests::sasl_plain_encode ... ok
test channels::irc::tests::specific_user_allowed ... ok
test channels::irc::tests::split_crlf_newlines ... ok
test channels::irc::tests::split_empty_message ... ok
test channels::irc::tests::split_exact_boundary ... ok
test channels::irc::tests::split_long_message ... ok
test channels::irc::tests::split_multiline_with_long_line ... ok
test channels::irc::tests::split_newlines_into_separate_lines ... ok
test channels::irc::tests::split_only_newlines ... ok
test channels::irc::tests::split_short_message ... ok
test channels::irc::tests::split_skips_empty_lines ... ok
test channels::irc::tests::split_trailing_newline ... ok
test channels::irc::tests::split_unicode_safe ... ok
test channels::irc::tests::wildcard_allows_anyone ... ok
test channels::matrix::tests::event_content_defaults ... ok
test channels::discord::tests::allowlist_empty_string_user_id ... ok
test channels::matrix::tests::sync_response_deserializes_empty ... ok
test channels::matrix::tests::sync_response_deserializes_with_events ... ok
test channels::matrix::tests::sync_response_ignores_non_text_events ... ok
test channels::matrix::tests::sync_response_missing_rooms_defaults ... ok
test channels::discord::tests::allowlist_with_wildcard_and_specific ... ok
test channels::discord::tests::allowlist_case_sensitive ... ok
test channels::matrix::tests::whoami_response_deserializes ... ok
test channels::discord::tests::allowlist_is_exact_match_not_substring ... ok
test channels::prompt_builder::tests::build_system_prompt_excludes_state_header_when_disabled ... ok
test channels::prompt_builder::tests::build_system_prompt_includes_state_header ... ok
test channels::prompt_builder::tests::build_system_prompt_state_header_keeps_missing_file_marker ... ok
test channels::prompt_builder::tests::build_system_prompt_truncates_large_state ... ok
test channels::prompt_builder::tests::prompt_bootstrap_only_if_exists ... ok
test channels::prompt_builder::tests::prompt_contains_all_sections ... ok
test channels::prompt_builder::tests::prompt_empty_files_skipped ... ok
test channels::prompt_builder::tests::prompt_injects_safety ... ok
test channels::prompt_builder::tests::prompt_injects_tools ... ok
test channels::prompt_builder::tests::prompt_injects_workspace_files ... ok
test channels::prompt_builder::tests::prompt_missing_file_markers ... ok
test channels::prompt_builder::tests::prompt_no_daily_memory_injection ... ok
test channels::prompt_builder::tests::prompt_runtime_metadata ... ok
test channels::prompt_builder::tests::prompt_skills_compact_list ... ok
test channels::prompt_builder::tests::prompt_truncation ... ok
test channels::prompt_builder::tests::prompt_workspace_path ... ok
test agent::loop_::tests::persona_reflect_no_retry ... ok
test channels::discord::tests::discord_channel_name ... ok
test channels::discord::tests::empty_allowlist_denies_everyone ... ok
test channels::discord::tests::specific_allowlist_filters ... ok
test channels::discord::tests::wildcard_allows_everyone ... ok
test channels::matrix::tests::strips_trailing_slash ... ok
test channels::matrix::tests::multiple_trailing_slashes_strips_one ... ok
test channels::matrix::tests::empty_allowlist_denies_all ... ok
test channels::matrix::tests::creates_with_correct_fields ... ok
test channels::matrix::tests::name_returns_matrix ... ok
test channels::matrix::tests::wildcard_allows_anyone ... ok
test channels::matrix::tests::no_trailing_slash_unchanged ... ok
test channels::matrix::tests::unknown_user_denied ... ok
test channels::matrix::tests::user_case_insensitive ... ok
test channels::matrix::tests::specific_user_allowed ... ok
test channels::slack::tests::allowlist_case_sensitive ... ok
test channels::slack::tests::allowlist_exact_match_not_substring ... ok
test channels::runtime::tests::supervised_listener_marks_error_and_restarts_on_failures ... ok
test channels::slack::tests::allowlist_empty_user_id ... ok
test channels::slack::tests::slack_channel_name ... ok
test channels::slack::tests::allowlist_wildcard_and_specific ... ok
test channels::telegram::tests::telegram_api_url ... ok
test channels::slack::tests::slack_channel_with_channel_id ... ok
test channels::slack::tests::specific_allowlist_filters ... ok
test channels::slack::tests::wildcard_allows_everyone ... ok
test channels::telegram::tests::telegram_api_url_send_audio ... ok
test channels::telegram::tests::telegram_api_url_send_document ... ok
test channels::telegram::tests::telegram_api_url_send_video ... ok
test channels::slack::tests::empty_allowlist_denies_everyone ... ok
test channels::telegram::tests::telegram_api_url_send_voice ... ok
test channels::telegram::tests::telegram_send_audio_nonexistent_file ... ok
test channels::telegram::tests::telegram_api_url_send_photo ... ok
test channels::telegram::tests::telegram_channel_name ... ok
test channels::telegram::tests::telegram_send_video_nonexistent_file ... ok
test channels::telegram::tests::telegram_send_document_nonexistent_file ... ok
test channels::telegram::tests::telegram_send_photo_nonexistent_file ... ok
test channels::telegram::tests::telegram_user_allowed_wildcard ... ok
test channels::telegram::tests::telegram_send_voice_nonexistent_file ... ok
test channels::telegram::tests::telegram_user_allowed_specific ... ok
test channels::telegram::tests::telegram_user_allowed_by_numeric_id_identity ... ok
test channels::tests::classify_health_ok_false ... ok
test channels::tests::classify_health_ok_true ... ok
test channels::tests::classify_health_timeout ... ok
test channels::telegram::tests::telegram_user_case_sensitive ... ok
test channels::telegram::tests::telegram_user_denied_empty ... ok
test channels::telegram::tests::telegram_user_denied_when_none_of_identities_match ... ok
test channels::telegram::tests::telegram_user_empty_string_denied ... ok
test channels::telegram::tests::telegram_user_exact_match_not_substring ... ok
test channels::telegram::tests::telegram_wildcard_with_specific_users ... ok
test channels::whatsapp::tests::whatsapp_channel_name ... ok
test channels::whatsapp::tests::whatsapp_empty_text_skipped ... ok
test channels::whatsapp::tests::whatsapp_channel_fields_stored_correctly ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_case_sensitive ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_multiple_numbers ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_wildcard ... ok
test channels::whatsapp::tests::whatsapp_number_allowed_exact ... ok
test channels::whatsapp::tests::whatsapp_number_denied_empty ... ok
test channels::whatsapp::tests::whatsapp_parse_audio_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_contacts_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_document_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_changes_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_entry_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_messages_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_changes_array ... ok
test channels::whatsapp::tests::whatsapp_parse_empty_payload ... ok
test channels::whatsapp::tests::whatsapp_parse_entry_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_invalid_timestamp_uses_current ... ok
test channels::whatsapp::tests::whatsapp_parse_messages_not_array ... ok
test channels::whatsapp::tests::whatsapp_parse_location_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_entry_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_messages_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_changes_array ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_text_body ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_from_field ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_timestamp_uses_current ... ok
test channels::whatsapp::tests::whatsapp_parse_missing_value ... ok
test channels::whatsapp::tests::whatsapp_parse_mixed_authorized_unauthorized ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_changes ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_entries ... ok
test channels::whatsapp::tests::whatsapp_parse_newlines_preserved ... ok
test channels::whatsapp::tests::whatsapp_parse_multiple_messages ... ok
test channels::whatsapp::tests::whatsapp_parse_phone_already_has_plus ... ok
test channels::whatsapp::tests::whatsapp_parse_null_text_body ... ok
test channels::whatsapp::tests::whatsapp_parse_non_text_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_normalizes_phone_with_plus ... ok
test channels::whatsapp::tests::whatsapp_parse_reaction_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_special_characters ... ok
test channels::whatsapp::tests::whatsapp_parse_status_update_ignored ... ok
test channels::whatsapp::tests::whatsapp_parse_sticker_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_parse_unicode_message ... ok
test channels::whatsapp::tests::whatsapp_parse_valid_text_message ... ok
test cli::commands::tests::cli_definition_has_no_flag_conflicts ... ok
test channels::whatsapp::tests::whatsapp_parse_very_long_message ... ok
test cron::scheduler::tests::run_job_command_blocks_disallowed_command ... ok
test cron::scheduler::tests::run_job_command_blocks_forbidden_path_argument ... ok
test channels::whatsapp::tests::whatsapp_parse_unauthorized_number ... ok
test cron::scheduler::tests::run_job_command_policy_blocks_when_action_limit_is_exhausted ... ok
test cron::scheduler::tests::run_job_command_failure ... ok
test cron::scheduler::tests::run_job_command_success ... ok
test cron::scheduler::tests::scheduler_agent_jobs_never_direct_shell ... ok
test cron::scheduler::tests::scheduler_agent_retry_budget_is_bounded_by_max_attempts ... ok
test cron::scheduler::tests::scheduler_expires_agent_jobs ... ok
test cron::scheduler::tests::scheduler_agent_queue_bounded ... ok
test cron::tests::add_job_accepts_five_field_expression ... ok
test cron::tests::add_job_rejects_invalid_field_count ... ok
test cron::tests::add_list_remove_roundtrip ... ok
test channels::whatsapp::tests::whatsapp_parse_video_message_skipped ... ok
test cron::tests::due_jobs_filters_by_timestamp ... ok
test daemon::tests::detects_no_supervised_channels ... ok
test daemon::tests::detects_supervised_channels_present ... ok
test cron::scheduler::tests::scheduler_user_jobs_still_execute_expected_path ... ok
test daemon::tests::state_file_path_uses_config_directory ... ok
test cron::tests::reschedule_after_run_persists_last_status_and_last_run ... ok
test doctor::tests::doctor_reports_autonomy_gates ... ok
test doctor::tests::doctor_reports_memory_rollout ... ok
test doctor::tests::doctor_reports_memory_rollout_missing_config ... ok
test gateway::events::tests::client_message_chat_roundtrip ... ok
test gateway::events::tests::client_message_ping_roundtrip ... ok
test gateway::events::tests::server_message_chat_response_serializes ... ok
test gateway::events::tests::server_message_connected_includes_version ... ok
test gateway::events::tests::server_message_error_serializes ... ok
test gateway::events::tests::server_message_to_json_produces_valid_json ... ok
test gateway::openai_compat::auth::tests::empty_keys_allow_access ... ok
test gateway::openai_compat::auth::tests::invalid_key_returns_false ... ok
test gateway::openai_compat::auth::tests::no_authorization_header_returns_false ... ok
test gateway::openai_compat::auth::tests::valid_key_returns_true ... ok
test gateway::openai_compat::auth::tests::wrong_prefix_returns_false ... ok
test gateway::openai_compat::handler::tests::extract_messages_with_multiple_system_messages ... ok
test gateway::openai_compat::handler::tests::extract_messages_with_only_user ... ok
test gateway::openai_compat::handler::tests::extract_messages_with_system_and_user ... ok
test gateway::openai_compat::types::tests::deserializes_chat_completion_request ... ok
test gateway::openai_compat::types::tests::serializes_chat_completion ... ok
test gateway::openai_compat::types::tests::serializes_chat_completion_chunk ... ok
test gateway::tests::app_state_is_clone ... ok
test gateway::tests::autosave_entity_id_is_default ... ok
test gateway::tests::effective_defense_mode_kill_switch_forces_audit ... ok
test gateway::tests::external_ingress_policy_blocks_high_risk_payload_before_model_call ... ok
test gateway::tests::gateway_runtime_policy_context_is_disabled ... ok
test gateway::tests::handle_health_reflects_paired_when_tokens_exist ... ok
test gateway::tests::handle_health_returns_ok_with_unpaired_state ... ok
test gateway::tests::policy_accounting_response_returns_429 ... ok
test gateway::tests::policy_violation_enforce_bearer_returns_401 ... ok
test gateway::tests::policy_violation_enforce_secret_returns_401 ... ok
test gateway::tests::policy_violation_reason_bearer ... ok
test gateway::tests::policy_violation_reason_webhook_secret ... ok
test gateway::tests::security_body_limit_is_64kb ... ok
test gateway::tests::security_timeout_is_30_seconds ... ok
test gateway::tests::webhook_autosave_event_fields ... ok
test gateway::tests::webhook_body_requires_message_field ... ok
test gateway::tests::webhook_policy_blocks_when_action_limit_is_exhausted ... ok
test gateway::tests::whatsapp_autosave_event_includes_sender ... ok
test gateway::tests::whatsapp_message_404_when_not_configured ... ok
test channels::whatsapp::tests::whatsapp_parse_whitespace_only_message_skipped ... ok
test channels::whatsapp::tests::whatsapp_verify_token ... ok
test gateway::tests::whatsapp_message_ack_empty_messages ... ok
test gateway::tests::whatsapp_query_fields_are_optional ... ok
test gateway::tests::whatsapp_signature_case_sensitive_prefix ... ok
test gateway::tests::whatsapp_signature_empty_body ... ok
test gateway::tests::whatsapp_signature_empty_header ... ok
test gateway::tests::whatsapp_signature_extra_bytes ... ok
test gateway::tests::whatsapp_signature_invalid_hex ... ok
test gateway::tests::whatsapp_signature_invalid_wrong_body ... ok
test gateway::tests::whatsapp_signature_invalid_wrong_secret ... ok
test gateway::tests::whatsapp_signature_json_payload ... ok
test gateway::tests::whatsapp_signature_missing_prefix ... ok
test gateway::tests::whatsapp_signature_truncated_hex ... ok
test gateway::tests::whatsapp_signature_unicode_body ... ok
test gateway::tests::whatsapp_signature_valid ... ok
test gateway::tests::whatsapp_message_rejects_invalid_json ... ok
test daemon::tests::supervisor_marks_error_and_restart_on_failure ... ok
test daemon::tests::supervisor_marks_unexpected_exit_as_error ... ok
test gateway::tests::whatsapp_verify_returns_404_when_not_configured ... ok
test gateway::tests::whatsapp_message_rejects_invalid_signature ... ok
test heartbeat::engine::tests::ensure_heartbeat_file_creates_file ... ok
test heartbeat::engine::tests::ensure_heartbeat_file_does_not_overwrite ... ok
test heartbeat::engine::tests::parse_tasks_basic ... ok
test heartbeat::engine::tests::parse_tasks_bullet_with_content_after_spaces ... ok
test heartbeat::engine::tests::parse_tasks_dash_without_space_ignored ... ok
test heartbeat::engine::tests::parse_tasks_empty_content ... ok
test heartbeat::engine::tests::parse_tasks_many_tasks ... ok
test heartbeat::engine::tests::parse_tasks_mixed_markdown ... ok
test heartbeat::engine::tests::parse_tasks_only_comments ... ok
test heartbeat::engine::tests::parse_tasks_single_task ... ok
test heartbeat::engine::tests::parse_tasks_trailing_space_bullet_trimmed_to_dash ... ok
test heartbeat::engine::tests::parse_tasks_unicode ... ok
test heartbeat::engine::tests::parse_tasks_with_leading_whitespace ... ok
test heartbeat::engine::tests::run_returns_immediately_when_disabled ... ok
test heartbeat::engine::tests::tick_counts_tasks_from_file ... ok
test heartbeat::engine::tests::tick_returns_zero_when_no_file ... ok
test integrations::inventory::tests::inventory_json_output_is_stable ... ok
test integrations::inventory::tests::parse_integration_capability_matrix_matches_registry_projection ... ok
test integrations::inventory::tests::parse_registry_coming_soon_count_matches_baseline ... ok
test integrations::inventory::tests::parse_registry_coming_soon_count_matches_symbol_scan ... ok
test integrations::inventory::tests::parse_skillforge_unimplemented_sources_matches_baseline ... ok
test integrations::inventory::tests::parse_skillforge_unimplemented_sources_matches_symbol_scan ... ok
test integrations::inventory::tests::registry_projection_rejects_unbacked_active_or_available ... ok
test integrations::inventory::tests::sort_is_stable_by_category_then_name ... ok
test integrations::inventory::tests::validate_inventory_against_sources_detects_mismatches ... ok
test integrations::inventory::tests::validate_inventory_against_sources_treats_skillforge_order_as_stable ... ok
test integrations::registry::tests::all_categories_represented ... ok
test integrations::registry::tests::category_counts_reasonable ... ok
test integrations::registry::tests::coming_soon_integrations_stay_coming_soon ... ok
test integrations::registry::tests::imessage_active_when_configured ... ok
test integrations::registry::tests::imessage_available_when_not_configured ... ok
test integrations::registry::tests::macos_active_on_macos ... ok
test integrations::registry::tests::matrix_active_when_configured ... ok
test integrations::registry::tests::matrix_available_when_not_configured ... ok
test integrations::registry::tests::no_duplicate_names ... ok
test integrations::registry::tests::no_empty_names_or_descriptions ... ok
test integrations::registry::tests::registry_has_entries ... ok
test integrations::registry::tests::shell_and_filesystem_always_active ... ok
test integrations::registry::tests::status_functions_dont_panic ... ok
test integrations::registry::tests::telegram_active_when_configured ... ok
test integrations::registry::tests::telegram_available_when_not_configured ... ok
test memory::chunker::tests::chunk_count_reasonable ... ok
test memory::chunker::tests::deeply_nested_headings_ignored ... ok
test memory::chunker::tests::empty_text ... ok
test memory::chunker::tests::fts5_special_chars_in_content ... ok
test memory::chunker::tests::heading_at_end_of_text ... ok
test memory::chunker::tests::heading_sections ... ok
test memory::chunker::tests::headings_only_no_body ... ok
test memory::chunker::tests::indexes_are_sequential ... ok
test memory::chunker::tests::max_tokens_one ... ok
test memory::chunker::tests::max_tokens_zero ... ok
test memory::chunker::tests::multiple_blank_lines_between_paragraphs ... ok
test memory::chunker::tests::no_content_loss ... ok
test memory::chunker::tests::only_newlines_and_whitespace ... ok
test memory::chunker::tests::preserves_heading_in_split_sections ... ok
test memory::chunker::tests::respects_max_tokens ... ok
test memory::chunker::tests::single_heading_no_content ... ok
test memory::chunker::tests::single_short_paragraph ... ok
test memory::chunker::tests::unicode_content ... ok
test memory::chunker::tests::very_long_single_line_no_newlines ... ok
test gateway::tests::whatsapp_verify_rejects_wrong_mode ... ok
test memory::embeddings::tests::custom_url_blocks_ipv6_loopback_and_link_local ... ok
test memory::embeddings::tests::custom_url_blocks_localhost ... ok
test memory::embeddings::tests::custom_url_blocks_metadata_host ... ok
test memory::embeddings::tests::custom_url_blocks_private_ipv4_ranges ... ok
test memory::embeddings::tests::custom_url_rejects_invalid_url ... ok
test memory::embeddings::tests::deterministic_embedder_is_stable_and_dimensional ... ok
test memory::embeddings::tests::factory_custom_empty_url ... ok
test gateway::tests::whatsapp_verify_rejects_missing_challenge ... ok
test memory::embeddings::tests::factory_empty_string_returns_noop ... ok
test memory::embeddings::tests::factory_none ... ok
test gateway::tests::whatsapp_verify_rejects_wrong_token ... ok
test gateway::tests::whatsapp_verify_returns_challenge_on_valid ... ok
test memory::embeddings::tests::factory_unknown_provider_returns_noop ... ok
test memory::embeddings::tests::noop_embed_empty_batch ... ok
test memory::embeddings::tests::noop_embed_multiple_texts ... ok
test memory::embeddings::tests::noop_embed_one_returns_error ... ok
test memory::embeddings::tests::noop_embed_returns_empty ... ok
test memory::embeddings::tests::noop_name ... ok
test memory::embeddings::tests::custom_url_allows_http_only_in_tests ... ok
test memory::embeddings::tests::factory_custom_url ... ok
test memory::hygiene::tests::archives_old_daily_memory_files ... ok
test memory::hygiene::tests::archives_old_session_files ... ok
test memory::embeddings::tests::factory_openai ... ok
test memory::hygiene::tests::memory_hygiene_per_layer_retention ... ok
test memory::hygiene::tests::purges_old_memory_archives ... ok
test memory::hygiene::tests::skips_second_run_within_cadence_window ... ok
test memory::embeddings::tests::factory_openai_no_api_key ... ok
test memory::hygiene::tests::prunes_old_conversation_rows_in_sqlite_backend ... ok
test memory::lancedb::tests::lancedb_name_and_health ... ok
test memory::embeddings::tests::openai_dimensions_custom ... ok
test memory::markdown::tests::markdown_count ... ok
test memory::markdown::tests::markdown_empty_count ... ok
test memory::markdown::tests::markdown_empty_recall ... ok
test memory::markdown::tests::markdown_forget_is_noop ... ok
test memory::markdown::tests::markdown_health_check ... ok
test memory::markdown::tests::markdown_list_by_category ... ok
test memory::markdown::tests::markdown_name ... ok
test memory::markdown::tests::markdown_recall_keyword ... ok
test memory::markdown::tests::markdown_recall_no_match ... ok
test memory::markdown::tests::markdown_store_core ... ok
test memory::markdown::tests::markdown_store_daily ... ok
test memory::tests::factory_markdown ... ok
test memory::tests::factory_none_falls_back_to_markdown ... ok
test memory::tests::factory_sqlite ... ok
test memory::tests::factory_unknown_falls_back_to_markdown ... ok
test memory::embeddings::tests::openai_trailing_slash_stripped ... ok
test memory::vector::tests::bytes_to_vec_non_aligned_truncates ... ok
test memory::vector::tests::bytes_to_vec_three_bytes_returns_empty ... ok
test memory::vector::tests::cosine_both_zero_vectors ... ok
test memory::vector::tests::cosine_empty_returns_zero ... ok
test memory::vector::tests::cosine_high_dimensional ... ok
test memory::vector::tests::cosine_identical_vectors ... ok
test memory::vector::tests::cosine_infinity_returns_zero_or_finite ... ok
test memory::vector::tests::cosine_mismatched_lengths ... ok
test memory::vector::tests::cosine_nan_returns_zero ... ok
test memory::vector::tests::cosine_negative_values ... ok
test memory::vector::tests::cosine_opposite_vectors_clamped ... ok
test memory::vector::tests::cosine_orthogonal_vectors ... ok
test memory::vector::tests::cosine_similar_vectors ... ok
test memory::vector::tests::cosine_single_element ... ok
test memory::vector::tests::cosine_zero_vector ... ok
test memory::vector::tests::final_score_clamps_and_penalty ... ok
test memory::vector::tests::final_score_matches_weights ... ok
test memory::vector::tests::hybrid_merge_deduplicates ... ok
test memory::vector::tests::hybrid_merge_duplicate_ids_in_same_source ... ok
test memory::vector::tests::hybrid_merge_empty_inputs ... ok
test memory::vector::tests::hybrid_merge_keyword_only ... ok
test memory::vector::tests::hybrid_merge_large_bm25_normalization ... ok
test memory::vector::tests::hybrid_merge_limit_zero ... ok
test memory::vector::tests::hybrid_merge_negative_keyword_scores ... ok
test memory::vector::tests::hybrid_merge_respects_limit ... ok
test memory::tests::memory_hygiene_failure_nonfatal ... ok
test memory::vector::tests::hybrid_merge_single_item ... ok
test memory::vector::tests::hybrid_merge_vector_only ... ok
test memory::vector::tests::hybrid_merge_zero_weights ... ok
test memory::vector::tests::vec_bytes_empty ... ok
test memory::vector::tests::vec_bytes_roundtrip ... ok
test memory::vector::tests::vec_bytes_roundtrip_nan_preserves_bits ... ok
test memory::vector::tests::vec_bytes_roundtrip_special_values ... ok
test observability::log::tests::log_observer_all_events_no_panic ... ok
test observability::log::tests::log_observer_all_metrics_no_panic ... ok
test observability::log::tests::log_observer_name ... ok
test observability::multi::tests::multi_empty_no_panic ... ok
test observability::multi::tests::multi_fans_out_events ... ok
test observability::multi::tests::multi_fans_out_flush ... ok
test observability::multi::tests::multi_fans_out_metrics ... ok
test observability::multi::tests::multi_name ... ok
test observability::noop::tests::noop_flush_does_not_panic ... ok
test observability::noop::tests::noop_name ... ok
test observability::noop::tests::noop_record_event_does_not_panic ... ok
test observability::noop::tests::noop_record_metric_does_not_panic ... ok
test observability::otel::tests::otel_observer_name ... ok
test observability::otel::tests::otel_observer_smoke_and_counts ... ok
test observability::prometheus::tests::prometheus_observer_name ... ok
test observability::prometheus::tests::prometheus_observer_smoke_and_counts ... ok
test observability::tests::factory_empty_string_falls_back_to_noop ... ok
test observability::tests::factory_expanded_backends_smoke_paths ... ok
test observability::tests::factory_log_returns_log ... ok
test observability::tests::factory_none_returns_noop ... ok
test observability::tests::factory_noop_returns_noop ... ok
test observability::tests::factory_otel_returns_otel ... ok
test observability::tests::factory_prometheus_returns_prometheus ... ok
test observability::tests::factory_unknown_falls_back_to_noop ... ok
test observability::tests::observability_memory_lifecycle_metrics ... ok
test observability::tests::observability_records_intent_metrics ... ok
test onboard::domain::tests::provider_env_var_known_providers ... ok
test onboard::domain::tests::validate_base_url_preserves_path ... ok
test onboard::domain::tests::validate_base_url_rejects_empty ... ok
test onboard::domain::tests::validate_base_url_trims_trailing_slash ... ok
test onboard::domain::tests::validate_base_url_trims_whitespace ... ok
test onboard::domain::tests::validate_non_empty_rejects_blank ... ok
test onboard::scaffold::tests::scaffold_defaults_empty_fields ... ok
test onboard::scaffold::tests::scaffold_creates_files_and_dirs ... ok
test onboard::scaffold::tests::scaffold_renders_template_variables ... ok
test onboard::scaffold::tests::scaffold_skips_existing_files ... ok
test persona::state_header::tests::state_header_rejects_immutable_field_mutation_boundary ... ok
test persona::state_header::tests::state_header_rejects_invalid ... ok
test persona::state_header::tests::state_header_valid_v1_payload_parse ... ok
test persona::state_persistence::tests::persona_bootstrap_seeds_minimal_state ... ok
test persona::state_persistence::tests::state_header_post_write_syncs_mirror ... ok
test persona::state_persistence::tests::state_header_writeback_atomicity ... ok
test persona::state_persistence::tests::state_header_repairs_divergence ... ok
test providers::anthropic::tests::chat_request_serializes_with_system ... ok
test providers::anthropic::tests::chat_request_serializes_without_system ... ok
test providers::anthropic::tests::chat_response_deserializes ... ok
test providers::anthropic::tests::chat_response_empty_content ... ok
test providers::anthropic::tests::chat_response_multiple_blocks ... ok
test providers::anthropic::tests::chat_fails_without_key ... ok
test providers::anthropic::tests::chat_with_system_fails_without_key ... ok
test memory::lancedb::tests::lancedb_forget_and_count ... ok
test providers::anthropic::tests::creates_with_empty_key ... ok
test providers::anthropic::tests::creates_with_custom_base_url ... ok
test providers::anthropic::tests::creates_with_key ... ok
test cron::scheduler::tests::execute_job_with_retry_exhausts_attempts ... ok
test cron::scheduler::tests::execute_job_with_retry_recovers_after_first_failure ... ok
test providers::anthropic::tests::setup_token_detection_works ... ok
test providers::anthropic::tests::temperature_range_serializes ... ok
test providers::anthropic::tests::creates_without_key ... ok
test providers::anthropic::tests::creates_with_whitespace_key ... ok
test providers::anthropic::tests::custom_base_url_trims_trailing_slash ... ok
test providers::anthropic::tests::default_base_url_when_none_provided ... ok
test providers::compatible::tests::chat_completions_url_custom_full_endpoint ... ok
test providers::compatible::tests::chat_completions_url_base_with_v1 ... ok
test providers::compatible::tests::chat_completions_url_opencode ... ok
test providers::compatible::tests::chat_completions_url_glm ... ok
test memory::lancedb::tests::lancedb_store_get_upsert_and_recall ... ok
test providers::compatible::tests::chat_completions_url_standard_openai ... ok
test providers::compatible::tests::chat_completions_url_trailing_slash ... ok
test providers::compatible::tests::chat_completions_url_volcengine_ark ... ok
test providers::compatible::tests::chat_completions_url_without_v1 ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_chat_id ... ok
test channels::telegram::tests::telegram_send_document_bytes_builds_correct_form ... ok
test providers::compatible::tests::request_serializes_correctly ... ok
test providers::compatible::tests::response_deserializes ... ok
test providers::compatible::tests::response_empty_choices ... ok
test providers::compatible::tests::responses_extracts_any_text_as_fallback ... ok
test providers::compatible::tests::responses_extracts_nested_output_text ... ok
test providers::compatible::tests::responses_extracts_top_level_output_text ... ok
test channels::telegram::tests::telegram_send_photo_by_url_builds_correct_json ... ok
test providers::compatible::tests::chat_fails_without_key ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_file ... ok
test channels::telegram::tests::telegram_send_photo_bytes_builds_correct_form ... ok
test channels::telegram::tests::telegram_send_document_bytes_empty_filename ... ok
test channels::telegram::tests::telegram_send_document_by_url_builds_correct_json ... ok
test providers::gemini::tests::error_response_deserialization ... ok
test providers::gemini::tests::model_name_formatting ... ok
test providers::gemini::tests::gemini_cli_dir_returns_path ... ok
test providers::compatible::tests::chat_completions_url_zai ... ok
test providers::gemini::tests::request_serialization ... ok
test providers::gemini::tests::response_deserialization ... ok
test providers::oauth_recovery::tests::cooldown_skips_repeat_recovery_after_failure ... ok
test providers::oauth_recovery::tests::retries_once_after_recovery_and_rebuild ... ok
test providers::compatible::tests::chat_error_messages_redact_sensitive_fields ... ok
test providers::compatible::tests::creates_without_key ... ok
test providers::compatible::tests::creates_with_key ... ok
test providers::compatible::tests::custom_auth_style ... ok
test providers::ollama::tests::request_serializes_with_system ... ok
test providers::ollama::tests::request_serializes_without_system ... ok
test providers::ollama::tests::response_deserializes ... ok
test providers::ollama::tests::response_with_empty_content ... ok
test providers::ollama::tests::response_with_multiline ... ok
test providers::gemini::tests::provider_creates_with_key ... ok
test providers::compatible::tests::x_api_key_auth_style ... ok
test providers::compatible::tests::responses_url_standard ... ok
test providers::compatible::tests::responses_url_custom_full_endpoint ... ok
test providers::gemini::tests::auth_source_reports_correctly ... ok
test providers::openai::tests::request_serializes_with_system_message ... ok
test providers::openai::tests::request_serializes_without_system ... ok
test providers::openai::tests::response_deserializes_empty_choices ... ok
test providers::openai::tests::response_deserializes_multiple_choices ... ok
test providers::compatible::tests::strips_trailing_slash ... ok
test providers::openai::tests::response_deserializes_single_choice ... ok
test providers::openai::tests::response_with_unicode ... ok
test providers::openai::tests::response_with_long_content ... ok
test providers::reliable::tests::non_retryable_detects_common_patterns ... ok
test providers::gemini::tests::provider_creates_without_key ... ok
test providers::reliable::tests::returns_aggregated_error_when_all_providers_fail ... ok
test providers::reliable::tests::skips_retries_on_non_retryable_error ... ok
test providers::reliable::tests::succeeds_without_retry ... ok
test providers::ollama::tests::custom_url_no_trailing_slash ... ok
test providers::ollama::tests::custom_url_trailing_slash ... ok
test providers::tests::factory_anthropic_custom_empty_url_errors ... ok
test providers::ollama::tests::default_url ... ok
test providers::openai::tests::chat_fails_without_key ... ok
test providers::ollama::tests::empty_url_uses_empty ... ok
test providers::openai::tests::creates_without_key ... ok
test providers::openai::tests::chat_with_system_fails_without_key ... ok
test providers::openai::tests::creates_with_key ... ok
test providers::openai::tests::creates_with_empty_key ... ok
test providers::tests::factory_custom_empty_url_errors ... ok
test providers::reliable::tests::falls_back_after_retries_exhausted ... ok
test providers::reliable::tests::retries_then_recovers ... ok
test providers::tests::factory_anthropic ... ok
test providers::tests::factory_anthropic_custom_no_key ... ok
test providers::tests::factory_empty_name_errors ... ok
test providers::tests::factory_anthropic_custom_trailing_slash ... ok
test providers::tests::factory_anthropic_custom_url ... ok
test providers::tests::factory_custom_localhost ... ok
test providers::tests::factory_cohere ... ok
test providers::tests::factory_custom_url ... ok
test providers::tests::factory_custom_no_key ... ok
test providers::tests::factory_copilot ... ok
test providers::tests::factory_deepseek ... ok
test providers::compatible::tests::all_compatible_providers_fail_without_key ... ok
test providers::tests::factory_bedrock ... ok
test providers::tests::factory_cloudflare ... ok
test providers::tests::factory_groq ... ok
test channels::telegram::tests::telegram_send_document_bytes_with_caption ... ok
test channels::telegram::tests::telegram_send_photo_bytes_with_caption ... ok
test providers::tests::factory_minimax ... ok
test providers::tests::factory_unknown_provider_errors ... ok
test providers::tests::factory_mistral ... ok
test providers::tests::factory_fireworks ... ok
test providers::tests::factory_openai ... ok
test providers::tests::factory_glm ... ok
test providers::tests::resilient_provider_errors_for_invalid_primary ... ok
test providers::tests::factory_moonshot ... ok
test providers::tests::factory_perplexity ... ok
test providers::tests::sanitize_handles_delimiter_boundaries ... ok
test providers::tests::sanitize_handles_json_wrapped_key ... ok
test providers::tests::sanitize_keeps_bare_prefix ... ok
test providers::tests::sanitize_keeps_non_secret_key_value_pairs ... ok
test providers::tests::sanitize_no_secret_no_change ... ok
test providers::tests::sanitize_preserves_unicode_boundaries ... ok
test providers::tests::sanitize_scrubs_additional_token_prefixes ... ok
test providers::tests::sanitize_scrubs_bearer_authorization_headers ... ok
test providers::tests::sanitize_scrubs_multiple_prefixes ... ok
test providers::tests::sanitize_scrubs_query_and_json_token_fields ... ok
test providers::tests::sanitize_scrubs_sk_prefix ... ok
test providers::tests::sanitize_short_prefix_then_real_key ... ok
test providers::tests::sanitize_sk_proj_comment_then_real_key ... ok
test providers::tests::sanitize_truncates_after_scrub ... ok
test providers::tests::sanitize_truncates_long_error ... ok
test runtime::docker::tests::docker_has_filesystem_access ... ok
test runtime::docker::tests::docker_has_shell_access ... ok
test runtime::docker::tests::docker_memory_budget_unlimited ... ok
test runtime::docker::tests::docker_name ... ok
test runtime::docker::tests::docker_storage_path_is_workspace_scoped ... ok
test runtime::docker::tests::docker_supports_long_running ... ok
test runtime::native::tests::native_has_filesystem_access ... ok
test runtime::native::tests::native_has_shell_access ... ok
test runtime::native::tests::native_memory_budget_unlimited ... ok
test runtime::native::tests::native_name ... ok
test runtime::native::tests::native_storage_path_contains_asteroniris ... ok
test runtime::native::tests::native_supports_long_running ... ok
test runtime::tests::factory_docker_disabled_without_gate ... ok
test runtime::tests::factory_docker_enabled_with_gate ... ok
test runtime::tests::factory_native ... ok
test security::external_content::tests::detect_and_decide_routes_high_risk_to_block ... ok
test security::external_content::tests::detect_and_decide_routes_marker_collision_to_sanitize ... ok
test security::external_content::tests::prepare_external_content_blocks_and_drops_attacker_string_from_model_input ... ok
test security::external_content::tests::sanitize_marker_collision_rewrites_reserved_markers ... ok
test security::external_content::tests::summarize_for_persistence_never_contains_raw_wrapped_payload ... ok
test security::external_content::tests::summarize_for_persistence_source_normalization_is_deterministic ... ok
test providers::tests::factory_synthetic ... ok
test security::pairing::tests::brute_force_lockout_after_max_attempts ... ok
test security::pairing::tests::constant_time_eq_different ... ok
test security::pairing::tests::constant_time_eq_same ... ok
test security::pairing::tests::correct_code_resets_failed_attempts ... ok
test security::pairing::tests::generate_code_is_6_digits ... ok
test security::pairing::tests::generate_code_is_not_deterministic ... ok
test security::pairing::tests::generate_token_has_prefix ... ok
test security::pairing::tests::hash_token_differs_for_different_inputs ... ok
test security::pairing::tests::hash_token_is_deterministic ... ok
test security::pairing::tests::hash_token_produces_64_hex_chars ... ok
test security::pairing::tests::is_authenticated_when_pairing_disabled ... ok
test security::pairing::tests::is_authenticated_with_invalid_token ... ok
test security::pairing::tests::is_authenticated_with_prehashed_token ... ok
test security::pairing::tests::is_authenticated_with_valid_token ... ok
test security::pairing::tests::is_token_hash_detects_hash_vs_plaintext ... ok
test security::pairing::tests::localhost_variants_not_public ... ok
test security::pairing::tests::lockout_returns_remaining_seconds ... ok
test security::pairing::tests::new_guard_generates_code_when_no_tokens ... ok
test security::pairing::tests::new_guard_no_code_when_pairing_disabled ... ok
test security::pairing::tests::new_guard_no_code_when_tokens_exist ... ok
test security::pairing::tests::pair_then_authenticate ... ok
test security::pairing::tests::real_ip_is_public ... ok
test security::pairing::tests::tokens_returns_hashes ... ok
test security::pairing::tests::try_pair_correct_code ... ok
test security::pairing::tests::try_pair_empty_code ... ok
test security::pairing::tests::try_pair_wrong_code ... ok
test security::pairing::tests::zero_zero_is_public ... ok
test security::policy::tests::absolute_paths_allowed_when_not_workspace_only ... ok
test security::policy::tests::absolute_paths_blocked_when_workspace_only ... ok
test security::policy::tests::action_tracker_clone_is_independent ... ok
test security::policy::tests::action_tracker_records_actions ... ok
test security::policy::tests::action_tracker_starts_at_zero ... ok
test security::policy::tests::allowed_commands_basic ... ok
test security::policy::tests::autonomy_default_is_supervised ... ok
test security::policy::tests::autonomy_serde_roundtrip ... ok
test security::policy::tests::blocked_commands_basic ... ok
test security::policy::tests::can_act_full_true ... ok
test security::policy::tests::can_act_readonly_false ... ok
test security::policy::tests::can_act_supervised_true ... ok
test security::policy::tests::cargo_publish_blocked ... ok
test security::policy::tests::cargo_safe_commands_allowed ... ok
test security::policy::tests::checklist_all_system_dirs_blocked ... ok
test security::policy::tests::checklist_default_forbidden_paths_comprehensive ... ok
test security::policy::tests::checklist_default_policy_is_workspace_only ... ok
test security::policy::tests::checklist_null_byte_injection_blocked ... ok
test security::policy::tests::checklist_resolved_path_must_be_in_workspace ... ok
test security::policy::tests::checklist_root_path_blocked ... ok
test security::policy::tests::checklist_sensitive_dotfiles_blocked ... ok
test security::policy::tests::checklist_workspace_only_blocks_all_absolute ... ok
test security::policy::tests::command_env_var_prefix_with_allowed_cmd ... ok
test security::policy::tests::command_injection_backtick_blocked ... ok
test security::policy::tests::command_injection_and_chain_blocked ... ok
test security::policy::tests::command_injection_dollar_brace_blocked ... ok
test security::policy::tests::command_injection_dollar_paren_blocked ... ok
test security::policy::tests::command_injection_or_chain_blocked ... ok
test security::policy::tests::command_injection_redirect_blocked ... ok
test security::policy::tests::command_injection_semicolon_blocked ... ok
test security::policy::tests::command_injection_semicolon_no_space ... ok
test security::policy::tests::command_newline_injection_blocked ... ok
test security::policy::tests::command_with_absolute_path_extracts_basename ... ok
test security::policy::tests::command_with_env_var_prefix ... ok
test security::policy::tests::consume_action_and_cost_denies_over_action_limit ... ok
test security::policy::tests::command_with_pipes_validates_all_segments ... ok
test security::policy::tests::consume_action_and_cost_denies_over_daily_cost_limit ... ok
test security::policy::tests::custom_allowlist ... ok
test security::policy::tests::default_policy_has_sane_values ... ok
test security::policy::tests::dotfile_in_workspace_allowed ... ok
test security::policy::tests::empty_allowlist_blocks_everything ... ok
test security::policy::tests::empty_command_blocked ... ok
test security::policy::tests::empty_path_allowed ... ok
test security::policy::tests::find_exec_allowed_command_passes ... ok
test security::policy::tests::find_exec_disallowed_command_blocked ... ok
test security::policy::tests::forbidden_paths_blocked ... ok
test security::policy::tests::find_safe_usage_allowed ... ok
test security::policy::tests::from_config_creates_fresh_tracker ... ok
test security::policy::tests::from_config_maps_all_fields ... ok
test security::policy::tests::full_autonomy_still_respects_forbidden_paths ... ok
test security::policy::tests::full_autonomy_still_uses_allowlist ... ok
test security::policy::tests::git_clone_and_fetch_allowed ... ok
test security::policy::tests::git_config_blocked ... ok
test security::policy::tests::git_config_injection_via_clone_blocked ... ok
test security::policy::tests::git_config_read_allowed ... ok
test security::policy::tests::git_credential_subcommand_blocked ... ok
test security::policy::tests::git_push_blocked ... ok
test security::policy::tests::git_remote_blocked ... ok
test security::policy::tests::git_remote_read_allowed ... ok
test security::policy::tests::git_safe_read_commands_still_allowed ... ok
test security::policy::tests::git_submodule_blocked ... ok
test security::policy::tests::git_submodule_update_allowed ... ok
test security::policy::tests::git_upload_pack_blocked ... ok
test security::policy::tests::is_rate_limited_reflects_count ... ok
test security::policy::tests::no_false_positive_on_global_flag_in_non_git ... ok
test security::policy::tests::no_false_positive_on_filenames ... ok
test security::policy::tests::npm_publish_blocked ... ok
test security::policy::tests::npm_safe_commands_allowed ... ok
test security::policy::tests::path_home_tilde_ssh ... ok
test security::policy::tests::path_symlink_style_absolute ... ok
test security::policy::tests::path_traversal_blocked ... ok
test security::policy::tests::path_traversal_double_dot_in_filename ... ok
test security::policy::tests::path_traversal_encoded_dots ... ok
test security::policy::tests::path_var_run_blocked ... ok
test security::policy::tests::rate_limit_exactly_at_boundary ... ok
test security::policy::tests::path_with_null_byte_blocked ... ok
test security::policy::tests::rate_limit_zero_blocks_everything ... ok
test security::policy::tests::rate_limit_high_allows_many ... ok
test security::policy::tests::readonly_blocks_all_commands ... ok
test security::policy::tests::readonly_blocks_even_safe_commands ... ok
test security::policy::tests::record_action_allows_within_limit ... ok
test security::policy::tests::record_action_blocks_over_limit ... ok
test security::policy::tests::relative_paths_allowed ... ok
test security::policy::tests::supervised_allows_listed_commands ... ok
test security::policy::tests::tenant_policy_context_allows_same_tenant_recall_scope ... ok
test security::policy::tests::tenant_policy_context_denies_cross_tenant_recall_scope ... ok
test security::policy::tests::tenant_policy_context_denies_default_scope_fallback_when_enabled ... ok
test security::secrets::tests::corrupt_hex_returns_error ... ok
test security::secrets::tests::decrypt_and_migrate_fails_on_corrupt_legacy_hex ... ok
test security::secrets::tests::decrypt_and_migrate_handles_empty_secret ... ok
test security::secrets::tests::decrypt_and_migrate_handles_unicode ... ok
test security::secrets::tests::decrypt_and_migrate_returns_none_for_enc2 ... ok
test security::secrets::tests::decrypt_and_migrate_returns_none_for_plaintext ... ok
test security::secrets::tests::decrypt_and_migrate_upgrades_legacy_xor ... ok
test security::secrets::tests::decrypt_and_migrate_wrong_key_produces_garbage_or_fails ... ok
test security::secrets::tests::decrypt_plaintext_passthrough ... ok
test security::secrets::tests::different_stores_same_dir_interop ... ok
test security::secrets::tests::disabled_store_returns_plaintext ... ok
test security::secrets::tests::encrypt_decrypt_roundtrip ... ok
test security::secrets::tests::encrypt_empty_returns_empty ... ok
test security::secrets::tests::encrypting_same_value_produces_different_ciphertext ... ok
test security::secrets::tests::generate_random_key_correct_length ... ok
test security::secrets::tests::generate_random_key_has_no_uuid_fixed_bits ... ok
test security::secrets::tests::generate_random_key_not_all_zeros ... ok
test security::secrets::tests::hex_decode_invalid_chars_fails ... ok
test security::secrets::tests::hex_decode_odd_length_fails ... ok
test security::secrets::tests::hex_roundtrip ... ok
test security::secrets::tests::is_encrypted_detects_prefix ... ok
test security::secrets::tests::is_secure_encrypted_detects_enc2_only ... ok
test security::secrets::tests::key_file_created_on_first_encrypt ... ok
test security::secrets::tests::key_file_has_restricted_permissions ... ok
test security::secrets::tests::legacy_xor_decrypt_still_works ... ok
test providers::tests::factory_venice ... ok
test security::secrets::tests::migrated_value_is_tamper_resistant ... ok
test security::secrets::tests::migration_produces_different_ciphertext_each_time ... ok
test security::secrets::tests::needs_migration_detects_legacy_prefix ... ok
test security::secrets::tests::tampered_ciphertext_detected ... ok
test security::secrets::tests::truncated_ciphertext_returns_error ... ok
test security::secrets::tests::two_random_keys_differ ... ok
test security::secrets::tests::unicode_secret_roundtrip ... ok
test security::secrets::tests::wrong_key_detected ... ok
test security::secrets::tests::xor_cipher_empty_key ... ok
test security::secrets::tests::xor_cipher_roundtrip ... ok
test security::writeback_guard::tests::guard_accepts_bounded_self_tasks_and_style_profile ... ok
test security::writeback_guard::tests::guard_accepts_list_item_at_schema_boundary ... ok
test security::writeback_guard::tests::guard_accepts_valid_reflection ... ok
test security::writeback_guard::tests::guard_rejects_immutable_field_mutation_attempt ... ok
test security::writeback_guard::tests::guard_rejects_list_item_over_schema_boundary ... ok
test security::writeback_guard::tests::guard_rejects_malformed_payload ... ok
test security::writeback_guard::tests::guard_rejects_memory_poisoning ... ok
test security::writeback_guard::tests::guard_rejects_open_loops_over_limit ... ok
test security::secrets::tests::decrypt_and_migrate_handles_long_secret ... ok
test security::writeback_guard::tests::guard_rejects_self_task_expiry_over_allowed_horizon ... ok
test security::writeback_guard::tests::guard_rejects_self_task_with_poison_pattern ... ok
test security::writeback_guard::tests::guard_rejects_self_tasks_over_limit ... ok
test security::writeback_guard::tests::guard_rejects_unknown_state_header_fields ... ok
test security::writeback_guard::tests::guard_rejects_style_profile_out_of_safe_range ... ok
test service::tests::linux_service_file_has_expected_suffix ... ok
test security::secrets::tests::long_secret_roundtrip ... ok
test service::tests::run_capture_falls_back_to_stderr ... ok
test service::tests::xml_escape_escapes_reserved_chars ... ok
test skillforge::evaluate::tests::bad_pattern_tanks_security ... ok
test skillforge::evaluate::tests::exact_hack_is_flagged ... ok
test skillforge::evaluate::tests::hackathon_not_flagged_as_bad ... ok
test skillforge::evaluate::tests::high_quality_rust_repo_gets_auto ... ok
test skillforge::evaluate::tests::low_star_no_license_gets_manual_or_skip ... ok
test skillforge::evaluate::tests::scores_total_weighted ... ok
test skillforge::integrate::tests::escape_toml_handles_quotes_and_control_chars ... ok
test skillforge::integrate::tests::integrate_creates_files ... ok
test skillforge::integrate::tests::sanitize_rejects_traversal ... ok
test service::tests::run_capture_reads_stdout ... ok
test service::tests::run_checked_errors_on_non_zero_status ... ok
test skillforge::integrate::tests::sanitize_trims_dots ... ok
test skillforge::integrate::tests::sanitize_replaces_separators ... ok
test skillforge::scout::tests::dedup_removes_duplicates ... ok
test skillforge::scout::tests::parse_clawhub_items_derives_owner_from_url ... ok
test skillforge::scout::tests::parse_clawhub_items_maps_shared_schema ... ok
test skillforge::scout::tests::parse_github_items ... ok
test skillforge::scout::tests::parse_huggingface_items ... ok
test skillforge::scout::tests::scout_source_from_str ... ok
test skillforge::scout::tests::urlencoding_works ... ok
test skillforge::tests::default_config_values ... ok
test skillforge::tests::disabled_forge_returns_empty_report ... ok
test providers::tests::factory_opencode ... ok
test providers::tests::factory_openrouter ... ok
test skills::symlink_tests::tests::test_skills_symlink_permissions_and_safety ... ok
test skills::symlink_tests::tests::test_skills_symlink_unix_edge_cases ... ok
test skills::tests::tests::init_skills_creates_readme ... ok
test skills::tests::tests::init_skills_idempotent ... ok
test skills::tests::tests::load_empty_skills_dir ... ok
test skills::tests::tests::load_ignores_dir_without_manifest ... ok
test skills::tests::tests::load_ignores_files_in_skills_dir ... ok
test skills::tests::tests::load_multiple_skills ... ok
test skills::tests::tests::load_nonexistent_dir ... ok
test skills::tests::tests::load_skill_from_md ... ok
test skills::tests::tests::load_skill_from_toml ... ok
test skills::tests::tests::md_skill_heading_only ... ok
test skills::tests::tests::skills_dir_path ... ok
test skills::tests::tests::skills_to_prompt_empty ... ok
test skills::tests::tests::skills_to_prompt_includes_tools ... ok
test skills::tests::tests::skills_to_prompt_with_skills ... ok
test skills::tests::tests::toml_prefers_over_md ... ok
test skills::tests::tests::toml_skill_invalid_syntax_skipped ... ok
test skills::tests::tests::toml_skill_minimal ... ok
test skills::tests::tests::toml_skill_with_multiple_tools ... ok
test tools::browser::tests::browser_tool_empty_allowlist_blocks ... ok
test tools::browser::tests::browser_tool_name ... ok
test tools::browser::tests::browser_tool_validates_url ... ok
test tools::browser::tests::extract_host_handles_ipv6 ... ok
test tools::browser::tests::extract_host_works ... ok
test tools::browser::tests::host_matches_allowlist_exact ... ok
test tools::browser::tests::host_matches_allowlist_star ... ok
test tools::browser::tests::host_matches_allowlist_wildcard ... ok
test tools::browser::tests::is_private_host_catches_ipv6 ... ok
test tools::browser::tests::is_private_host_catches_ipv6_private_ranges ... ok
test tools::browser::tests::is_private_host_catches_mapped_ipv4 ... ok
test tools::browser::tests::is_private_host_detects_local ... ok
test tools::browser::tests::normalize_domains_works ... ok
test tools::browser::tests::validate_url_blocks_ipv6_ssrf ... ok
test tools::browser_open::tests::execute_blocks_readonly_mode ... ok
test tools::browser_open::tests::execute_blocks_when_rate_limited ... ok
test tools::browser_open::tests::normalize_allowed_domains_deduplicates ... ok
test tools::browser_open::tests::normalize_domain_strips_scheme_path_and_case ... ok
test tools::browser_open::tests::parse_ipv4_invalid ... ok
test tools::browser_open::tests::parse_ipv4_valid ... ok
test tools::browser_open::tests::validate_accepts_exact_domain ... ok
test tools::browser_open::tests::validate_accepts_subdomain ... ok
test tools::browser_open::tests::validate_rejects_allowlist_miss ... ok
test tools::browser_open::tests::validate_rejects_http ... ok
test tools::browser_open::tests::validate_rejects_localhost ... ok
test tools::browser_open::tests::validate_rejects_private_ipv4 ... ok
test tools::browser_open::tests::validate_rejects_userinfo ... ok
test tools::browser_open::tests::validate_rejects_whitespace ... ok
test tools::browser_open::tests::validate_requires_allowlist ... ok
test tools::composio::tests::composio_action_deserializes ... ok
test tools::composio::tests::composio_actions_response_deserializes ... ok
test providers::tests::factory_qianfan ... ok
test tools::composio::tests::composio_actions_response_empty ... ok
test tools::composio::tests::composio_actions_response_missing_items_defaults ... ok
test providers::tests::factory_gemini ... ok
test providers::tests::factory_together ... ok
test providers::tests::factory_ollama ... ok
test providers::tests::factory_vercel ... ok
test skillforge::tests::skillforge_clawhub_handles_auth_error ... ok
test skillforge::tests::skillforge_hf_discover ... ok
test skillforge::tests::skillforge_clawhub_discover ... ok
test tools::file_read::tests::file_read_blocks_absolute_path ... ok
test tools::file_read::tests::file_read_blocks_path_traversal ... ok
test tools::file_read::tests::file_read_blocks_symlink_escape ... ok
test tools::file_read::tests::file_read_empty_file ... ok
test tools::file_read::tests::file_read_existing_file ... ok
test tools::file_read::tests::file_read_missing_path_param ... ok
test tools::file_read::tests::file_read_name ... ok
test tools::file_read::tests::file_read_nested_path ... ok
test tools::file_read::tests::file_read_nonexistent_file ... ok
test tools::composio::tests::composio_tool_has_correct_name ... ok
test providers::tests::factory_xai ... ok
test tools::file_read::tests::file_read_schema_has_path ... ok
test tools::file_write::tests::file_write_blocks_absolute_path ... ok
test tools::file_write::tests::file_write_blocks_path_traversal ... ok
test tools::file_write::tests::file_write_blocks_symlink_escape ... ok
test tools::file_write::tests::file_write_creates_file ... ok
test tools::file_write::tests::file_write_creates_parent_dirs ... ok
test tools::file_write::tests::file_write_missing_content_param ... ok
test tools::file_write::tests::file_write_missing_path_param ... ok
test tools::file_write::tests::file_write_name ... ok
test tools::file_write::tests::file_write_empty_content ... ok
test tools::file_write::tests::file_write_schema_has_path_and_content ... ok
test tools::file_write::tests::file_write_overwrites_existing ... ok
test tools::file_read::tests::file_read_rejects_oversized_file ... ok
test tools::memory_forget::tests::forget_missing_key ... ok
test providers::tests::resilient_provider_with_resolver_uses_per_provider_credentials ... ok
test tools::memory_forget::tests::forget_nonexistent ... ok
test providers::tests::factory_zai ... ok
test providers::tests::resilient_provider_ignores_duplicate_and_invalid_fallbacks ... ok
test tools::memory_forget::tests::name_and_schema ... ok
test tools::memory_forget::tests::forget_existing ... ok
test tools::composio::tests::composio_tool_schema_has_required_fields ... ok
test tools::memory_recall::tests::name_and_schema ... ok
test tools::memory_recall::tests::recall_rejects_default_scope_when_tenant_mode_enabled ... ok
test tools::memory_recall::tests::recall_empty ... ok
test tools::composio::tests::composio_tool_has_description ... ok
test tools::memory_recall::tests::recall_missing_query ... ok
test tools::shell::tests::shell_blocks_disallowed_command ... ok
test tools::shell::tests::shell_blocks_readonly ... ok
test tools::memory_recall::tests::recall_finds_match ... ok
test tools::shell::tests::shell_captures_exit_code ... ok
test tools::shell::tests::shell_does_not_leak_api_key ... ok
test tools::shell::tests::shell_missing_command_param ... ok
test tools::shell::tests::shell_policy_blocks_when_action_limit_is_exhausted ... ok
test tools::shell::tests::shell_executes_allowed_command ... ok
test tools::shell::tests::shell_tool_description ... ok
test tools::shell::tests::shell_tool_name ... ok
test tools::shell::tests::shell_tool_schema_has_command ... ok
test tools::shell::tests::shell_wrong_type_param ... ok
test tools::tests::all_tools_excludes_browser_when_disabled ... ok
test tools::memory_store::tests::name_and_schema ... ok
test tools::tests::default_tools_all_have_descriptions ... ok
test tools::tests::all_tools_includes_browser_when_enabled ... ok
test tools::tests::default_tools_has_three ... ok
test tools::tests::default_tools_all_have_schemas ... ok
test tools::tests::default_tools_names ... ok
test tools::tests::tool_result_serde ... ok
test tools::tests::tool_result_with_error_serde ... ok
test tools::tests::tool_spec_generation ... ok
test tools::tests::tool_spec_serde ... ok
test tunnel::tests::cloudflare_tunnel_name ... ok
test tunnel::tests::custom_tunnel_name ... ok
test tunnel::tests::factory_cloudflare_with_config_ok ... ok
test tunnel::tests::factory_cloudflare_missing_config_errors ... ok
test tunnel::tests::factory_custom_missing_config_errors ... ok
test tunnel::tests::factory_custom_with_config_ok ... ok
test tunnel::tests::factory_empty_string_returns_none ... ok
test tunnel::tests::factory_ngrok_missing_config_errors ... ok
test tunnel::tests::factory_ngrok_with_config_ok ... ok
test tunnel::tests::factory_none_returns_none ... ok
test tunnel::tests::factory_tailscale_defaults_ok ... ok
test tunnel::tests::factory_unknown_provider_errors ... ok
test tunnel::tests::ngrok_with_domain ... ok
test tunnel::tests::ngrok_tunnel_name ... ok
test tunnel::tests::none_tunnel_health_always_true ... ok
test tunnel::tests::none_tunnel_public_url_is_none ... ok
test tunnel::tests::none_tunnel_name ... ok
test tunnel::tests::tailscale_funnel_mode ... ok
test tunnel::tests::none_tunnel_start_returns_local ... ok
test tunnel::tests::tailscale_tunnel_name ... ok
test util::tests::test_truncate_accented_characters ... ok
test util::tests::test_truncate_ascii_no_truncation ... ok
test util::tests::test_truncate_at_exact_boundary ... ok
test util::tests::test_truncate_ascii_with_truncation ... ok
test util::tests::test_truncate_cjk_characters ... ok
test util::tests::test_truncate_emoji_multiple ... ok
test util::tests::test_truncate_emoji_single ... ok
test util::tests::test_truncate_empty_string ... ok
test util::tests::test_truncate_long_string ... ok
test util::tests::test_truncate_mixed_ascii_emoji ... ok
test tools::shell::tests::shell_preserves_path_and_home ... ok
test tools::memory_store::tests::store_core ... ok
test util::tests::test_truncate_unicode_edge_case ... ok
test util::tests::test_truncate_zero_max_chars ... ok
test tools::memory_store::tests::store_missing_key ... ok
test tools::memory_store::tests::store_missing_content ... ok
test tools::composio::tests::connect_without_app_returns_error ... ok
test tools::memory_store::tests::store_with_category ... ok
test tools::memory_recall::tests::recall_respects_limit ... ok
test tools::composio::tests::execute_missing_action_returns_error ... ok
test tools::composio::tests::composio_tool_spec_roundtrip ... ok
test tools::composio::tests::execute_without_action_name_returns_error ... ok
test tools::composio::tests::execute_unknown_action_returns_error ... ok
test skillforge::tests::skillforge_hf_rate_limit_handling ... ok
test memory::lancedb::tests::lancedb_recall_respects_limit ... ok
test providers::tests::factory_all_providers_create_successfully ... ok

test result: ok. 1042 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 2.18s

     Running tests/agent.rs (target/debug/deps/agent-2966eabba70d4f7f)

running 13 tests
test action_intent::action_intent_requires_policy_verdict ... ok
test external_content::external_ingress_never_replays_blocked_raw_payload_to_model_input ... ok
test scheduler_routes::autonomy_policy_applies_all_routes ... ok
test scheduler_routes::autonomy_policy_blocks_bypass ... ok
test action_intent::noop_operator_never_executes_external_action ... ok
test scheduler_routes::scheduler_routes_user_vs_agent ... ok
test autonomy_cross_layer_flow::public_integration_turn_with_policy_scope_mismatch ... ok
test autonomy_cross_layer_flow::public_integration_turn_happy_path ... ok
test autonomy_cross_layer_flow::public_integration_turn_with_policy_happy_path ... ok
test autonomy_cross_layer_flow::external_content_injection_is_blocked_and_raw_payload_not_replayed_from_memory ... ok
test autonomy_cross_layer_flow::public_integration_turn_propagates_error ... ok
test autonomy_cross_layer_flow::verify_repair_escalates_with_policy_governance_under_retry_pressure ... ok
test autonomy_cross_layer_flow::autonomy_cycle_reflect_queue_verify_and_intent_seam_stays_bounded ... ok

test result: ok. 13 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.02s

     Running tests/gateway.rs (target/debug/deps/gateway-3b0c2342c0226e2a)

running 9 tests
test auth::observability_deterministic_factory_and_fanout_path ... ok
test auth::pairing_lifecycle_covers_success_failure_and_token_authentication ... ok
test embedding_batching::openai_embedder_batches_into_single_http_request ... ok
test auth::gateway_kill_switch_forces_non_blocking_path ... ok
test auth::gateway_warn_mode_returns_warning_path_without_deny ... ok
test auth::gateway_audit_mode_records_violations_without_blocking ... ok
test auth::gateway_auth_enforces_deny_and_allows_authorized_path ... ok
test auth::gateway_webhook_denies_missing_invalid_and_mismatched_auth_paths ... ok
test auth::gateway_pair_endpoint_enforces_retry_after_lockout ... ok

test result: ok. 9 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.13s

     Running tests/memory.rs (target/debug/deps/memory-9629044d5321e8dd)

running 64 tests
test backend_parity::memory_backend_parity_detects_drift ... ok
test capability_contract::memory_capability_matrix ... ok
test capability_contract::memory_capability_rejects_unsupported ... ok
test capability_contract::memory_capability_matrix_runtime_access ... ok
test comparison::memory_test_harness_flags_degraded ... ok
test comparison::compare_forget ... ok
test consolidation_orchestrator::memory_consolidation_is_idempotent ... ok
test comparison::compare_upsert ... ok
test comparison::compare_persistence ... ok
test comparison::compare_category_filter ... ok
test delete_contract::memory_delete_contract_artifact_matrix ... ok
test governance::memory_governance_delete_denied_is_audited ... ok
test delete_contract::memory_delete_contract_sqlite_hard_delete_dsar_authoritative ... ok
test consolidation_orchestrator::memory_consolidation_long_run ... ok
test comparison::compare_recall_quality ... ok
test consolidation_orchestrator::memory_consolidation_long_run_decay_progression ... ok
test governance::memory_governance_export_returns_scoped_bundle ... ok
test governance::memory_governance_inspect_export_delete ... ok
test governance_export::dsar_export_then_delete_flow ... ok
test layer_schema::memory_layer_backward_compat ... ok
test layer_schema::memory_layer_serde_roundtrip ... ok
test inference_events::memory_conflict_resolver_timestamp_normalization ... ok
test governance_delete::dsar_delete_completeness_detects_residue ... ok
test markdown_tagged::markdown_hard_delete_reports_degraded ... ok
test provenance_validation::memory_provenance_validation_defaults_confidence_by_source_class ... ok
test inference_events::memory_contradiction_event_recorded ... ok
test revocation_gate::memory_revocation_gate_applies_in_context_builder ... ok
test markdown_tagged::markdown_tagged_memory_roundtrip ... ok
test inference_events::memory_inferred_claim_persists ... ok
test inference_events::memory_conflict_resolver_precedence ... ok
test provenance_validation::memory_provenance_validation_rejects_invalid ... ok
test provenance_validation::memory_provenance_validation_accepts_valid ... ok
test sqlite_contract::sqlite_name_and_health_contract ... ok
test comparison::memory_test_harness_smoke ... ok
test sqlite_contract::sqlite_append_recall_forget_contract ... ok
test revocation_gate::memory_revocation_gate_blocks_cached_replay ... ok
test revocation_gate::memory_revocation_gate_blocks_replay ... ok
test capability_contract::lancedb_capability_contract ... ok
test sqlite_persistence::sqlite_persists_layer_and_provenance ... ok
test sqlite_schema::sqlite_schema_contains_core_tables ... ok
test sqlite_schema::sqlite_schema_contains_fts_table ... ok
test capability_contract::lancedb_persists_supported_memory_fields ... ok
test sqlite_search::sqlite_search_limit_zero_returns_empty ... ok
test sqlite_scoring::sqlite_contradiction_penalty_affects_order ... ok
test tenant_recall::tenant_mode_disables_default_fallback ... ok
test sqlite_scoring::sqlite_retrieval_salience_decay_ordering ... ok
test sqlite_search::sqlite_search_returns_keyword_hits ... ok
test tenant_recall::tenant_recall_all_entrypoints_block_cross_scope ... ok
test tenant_recall::tenant_recall_blocks_cross_scope ... ok
test tenant_recall::tenant_recall_e2e_cross_tenant_block ... ok
test tenant_recall::tenant_recall_all_entrypoints_allow_same_tenant ... ok
test tool_contract::memory_tool_policy_context_validation ... ok
test consolidation_orchestrator::memory_consolidation_failure_isolated ... ok
test sqlite_persistence::sqlite_legacy_rows_still_resolve ... ok
test tenant_recall::tenant_recall_e2e_same_tenant_paths ... ok
test tool_contract::memory_tool_schema_backward_compat ... ok
test comparison::compare_store_speed ... ok
test delete_contract::memory_delete_contract_degraded_backend ... ok
test consolidation_orchestrator::memory_consolidation_runs_async_nonblocking ... ok
test throughput::memory_throughput_churn_bounded_recall ... ok
test comparison::compare_recall_speed ... ok
test throughput::memory_throughput_ops_per_sec ... ok
test capability_contract::lancedb_reports_unsupported_semantics ... ok
test backend_parity::memory_backend_parity_matrix ... ok

test result: ok. 64 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.45s

     Running tests/persona.rs (target/debug/deps/persona-7b3188981642b375)

running 6 tests
test scope_regression::gateway_contract_regression_stays_stable ... ok
test scope_regression::gateway_signature_verification_behavior_is_unchanged ... ok
test scope_regression::channel_prompt_default_path_does_not_inject_state_mirror ... ok
test loop_continuity::persona_bootstrap_seeds_minimal_state ... ok
test injection_guard::prompt_injection_payload_is_rejected_and_writeback_is_not_persisted ... ok
test loop_continuity::continuity_across_restart_preserves_latest_backend_state_and_repairs_mirror ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s

     Running tests/project.rs (target/debug/deps/project-1957b5f3a19af001)

running 35 tests
test dockerignore::dockerignore_does_not_exclude_build_essentials ... ok
test dockerignore::dockerignore_excludes_ci_configs ... ok
test dockerignore::dockerignore_excludes_env_files ... ok
test config_schema::legacy_channel_defaults_are_preserved ... ok
test config_schema::legacy_minimal_config_deserializes_with_defaults ... ok
test dockerignore::dockerignore_excludes_image_files ... ok
test dockerignore::dockerignore_excludes_git_directory ... ok
test dockerignore::dockerignore_excludes_database_files ... ok
test dockerignore::dockerignore_excludes_markdown_files ... ok
test dockerignore::dockerignore_file_exists ... ok
test dockerignore::dockerignore_has_valid_syntax ... ok
test dockerignore::dockerignore_pattern_matching_edge_cases ... ok
test dockerignore::dockerignore_excludes_target_directory ... ok
test eval_harness::eval_gate_rejects_extra_columns ... ok
test eval_harness::eval_gate_rejects_permuted_columns ... ok
test eval_harness::eval_gate_requires_columns ... ok
test eval_harness::eval_harness_baseline_report_csv_is_deterministic ... ok
test dockerignore::dockerignore_excludes_security_critical_paths ... ok
test eval_harness::eval_harness_baseline_report_has_required_columns ... ok
test inventory_scope_lock::inventory_skillforge_marker_controls_unimplemented_extraction ... ok
test eval_harness::eval_harness_seed_change_diff_detected ... ok
test eval_harness::eval_harness_reproducible_seed ... ok
test inventory_scope_lock::inventory_ignores_test_only_registry_coming_soon_tokens ... ok
test inventory_scope_lock::normalize_inventory_unknown_source ... ok
test inventory_scope_lock::integrations_rejects_unbacked_active_status ... ok
test inventory_scope_lock::normalize_unimplemented_inventory ... ok
test inventory_scope_lock::integrations_status_matches_capability_matrix ... ok
test planner_dag::planner_dag_rejects_cycle ... ok
test planner_dag::planner_dag_rejects_duplicate_edge ... ok
test inventory_scope_lock::normalize_unimplemented_inventory_is_sorted_and_deduplicated ... ok
test planner_dag::planner_dag_rejects_unknown_node_edge ... ok
test planner_dag::planner_dag_valid ... ok
test inventory_scope_lock::load_capability_matrix_and_validate ... ok
test inventory_scope_lock::inventory_scope_lock ... ok
test inventory_scope_lock::inventory_detects_registry_drift ... ok

test result: ok. 35 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s

     Running tests/runtime.rs (target/debug/deps/runtime-0c29a56496361c9a)

running 6 tests
test adapter_docker::docker_runtime_contract_has_native_parity_for_supported_capabilities ... ok
test adapter_docker::docker_runtime_contract_is_gated_by_default ... ok
test adapter_native::native_runtime_adapter_satisfies_contract ... ok
test adapter_native::native_runtime_contract_is_deterministic_across_instances ... ok
test memory_write_paths::prompt_no_daily_memory_injection ... ok
test memory_write_paths::memory_autosave_includes_layer_provenance ... ok

test result: ok. 6 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.01s

   Doc-tests asteroniris

running 1 test
test src/util.rs - util::truncate_with_ellipsis (line 19) ... ignored

test result: ok. 0 passed; 0 failed; 1 ignored; 0 measured; 0 filtered out; finished in 0.00s

all doctests ran in 0.09s; merged doctests compilation took 0.09s

# AsteronIris Docker Compose Example
# 
# Quick start:
#   1. Copy this file and set your API key
#   2. Run: docker-compose up -d
#   3. Access gateway at http://localhost:3000
#
# For more info: https://github.com/haru0416-dev/AsteronIris

services:
  asteroniris:
    image: ghcr.io/haru0416-dev/asteroniris:latest
    # Or build locally:
    # build: .
    container_name: asteroniris
    restart: unless-stopped
    
    environment:
      # Required: Your LLM provider API key
      - API_KEY=${API_KEY:-}
      # Or use the prefixed version:
      # - ASTERONIRIS_API_KEY=${ASTERONIRIS_API_KEY:-}
      
      # Optional: LLM provider (default: openrouter)
      # Options: openrouter, openai, anthropic, ollama
      - PROVIDER=${PROVIDER:-openrouter}
      
      # Optional: Model override
      # - ASTERONIRIS_MODEL=anthropic/claude-sonnet-4-20250514
      
    volumes:
      # Persist workspace and config
      - asteroniris-data:/asteroniris-data
      
    ports:
      # Gateway API port
      - "3000:3000"
    
    # Health check
    healthcheck:
      test: ["CMD", "asteroniris", "doctor"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

volumes:
  asteroniris-data:
